<!DOCTYPE HTML>
<html>
    
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <title>My Project ITO</title>
        <link rel="stylesheet" type="text/css" href="./css/base.css" />
        <link rel="stylesheet" type="text/css" href="./css/pris.css" />
    </head>
    
    <body>
        <div class="pageWrapper">
            <!-- top -->
            <div class="top clearfix">
                <div class="wrap">
                    <a class="logo" href="">
                        <img src="./images/logo.png" alt="Company" />
                    </a>
                    <img class="slogan" src="./images/slogan.png" alt="Company Hangzhou: Project Resource Information System (PRIS)" />
                </div>
            </div>
            <!-- / top -->
            <!-- nav -->
            <div class="nav">
                <div class="wrap">
                    <ul class="clearfix">
                        <!-- add class on, then that nav will be highlighted -->
                        <li>
                            <a href="./">Homepage</a>
                        </li>
                        <li>
                            <a href="javascript:;">My Staff</a>
                            <!-- second level menu -->
                            <ul>
                                <li>
                                    <a href="mystaff_bpo.html">BPO</a>
                                </li>
                                <li>
                                    <a href="mystaff_ito.html">ITO</a>
                                </li>
                            </ul>
                            <!-- / second level menu -->
                        </li>
                        <li class="on">
                            <a href="javascript:;">My Project</a>
                            <!-- second level menu -->
                            <ul>
                                <li>
                                    <a href="myproject_bpo.html">BPO</a>
                                </li>
                                <li>
                                    <a href="myproject_ito.html">ITO</a>
                                </li>
                                <li>
                                    <a href="myproject_pmo.html">PMO</a>
                                </li>
                            </ul>
                            <!-- / second level menu -->
                        </li>
                        <li>
                            <a href="javascript:;">Operation Service</a>
                            <!-- second level menu -->
                            <ul>
                                <li>
                                    <a href="javascript:;">Billing
                                        <i></i>
                                    </a>
                                    <!-- third level menu -->
                                    <ul>
                                        <li>
                                            <a href="billing_tl.html">Team Leader</a>
                                        </li>
                                        <li>
                                            <a href="billing_pm.html">PM</a>
                                        </li>
                                        <li>
                                            <a href="billing_pmo.html">PMO</a>
                                        </li>
                                    </ul>
                                    <!-- / third level menu -->
                                </li>
                                <li>
                                    <a href="javascript:;">Invoice</a>
                                </li>
                            </ul>
                            <!-- / second level menu -->
                        </li>
                        <li>
                            <a href="javascript:;">Report Center</a>
                            <!-- second level menu -->
                            <ul>
                                <li>
                                    <a href="javascript:;">Executive Dashboard/Report</a>
                                </li>
                                <li>
                                    <a href="javascript:;">Operational Report</a>
                                </li>
                                <li>
                                    <a href="javascript:;">Atrack Customized report
                                        <i></i>
                                    </a>
                                    <!-- third level menu -->
                                    <ul>
                                        <li>
                                            <a href="structure_report_01_chart.html">Structure Report</a>
                                        </li>
                                        <li>
                                            <a href="javascript:;">Atrack Report</a>
                                        </li>
                                    </ul>
                                    <!-- / third level menu -->
                                </li>
                                <li>
                                    <a href="javascript:;">Other</a>
                                </li>
                            </ul>
                            <!-- / second level menu -->
                        </li>
                    </ul>
                </div>
            </div>
            <!-- / nav -->
            <!-- main content -->
            <div class="main wrap">
                <p class="crumb">
                    <a href="./homepage.html">Home</a>&gt;&gt;
                    <a href="">My Project</a>&gt;&gt;
                    <span>ITO</span>
                </p>

                <div class="staff_pie proj_pie clearfix">
                    <div class="pie_in" id="left_pie" data-source-chartName="./js/json/project_atrack_hours-name.json" data-source-chartValue="./js/json/project_atrack_hours-value.json">
                        <img class="img_loading" alt="loading" src="./images/pris_loading.gif" />
                    </div>
                    <div class="pie_in" id="right_pie" data-source-chart="./js/json/project_headcount.json">
                        <img class="img_loading" alt="loading" src="./images/pris_loading.gif" />
                    </div>
                </div>
                <!-- table -->
                <table id="project_table" class="project_table">
                    <thead>
                        <tr>
                            <!-- if the column need to be sorted, then should add property 'data-type' -->
                            <th>Business Unit</th>
                            <th>Team</th>
                            <th>Offshore Manager</th>
                            <th>Offshore Teamleader</th>
                            <th>
                                <div class="edit_info">
                                    <i class="jsTipIco alertIco"></i>Project
                                    <div class="jsTip tip">updated info
                                        <i></i>
                                    </div>
                                </div>
                            </th>
                            <th>Project Leader</th>
                            <th>Headcount</th>
                            <th>Start</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!--module 1-->
                        <tr>
                            <td rowspan="3">AAA</td>
                            <td rowspan="3">Team 1</td>
                            <td rowspan="3">Wang, Tian</td>
                            <td rowspan="3">Jim, Green</td>
                            <td>
                                <div class="td_project">
                                    <p>Project 1</p>
                                    <p class="action_p"><a href="edit_project.html"><i class="editIco_s"></i>Edit project</a></p>  
                                </div>
                            </td>
                            <td>Xiao, Ming</td>
                            <td>
                                <div class="td_headc">
                                    <p>HT: 500</p>
                                    <p>ZJU: 100</p>
                                    <p>FTE: 200</p>
                                    <p>vendor: 200</p>
                                </div>
                            </td>
                            <td>11, Jun, 2012</td>
                        </tr>
                        <tr>
                            <td>
                                <div class="td_project">
                                    <p>Project 1</p>
                                    <p class="action_p"><a href="edit_project.html"><i class="editIco_s"></i>Edit project</a></p>    
                                </div>
                            </td>
                            <td>Xiao, Ming</td>
                            <td>
                                <div class="td_headc">
                                    <p>HT: 500</p>
                                    <p>ZJU: 100</p>
                                    <p>FTE: 200</p>
                                    <p>vendor: 200</p>
                                </div>
                            </td>
                            <td>11, Jun, 2012</td>
                        </tr>
                        <tr>
                            <td>
                                <div class="td_project">
                                    <p>Project 1</p>
                                    <p class="action_p"><a href="edit_project.html"><i class="editIco_s"></i>Edit project</a></p>  
                                </div>
                            </td>
                            <td>Xiao, Ming</td>
                            <td>
                                <div class="td_headc">
                                    <p>HT: 500</p>
                                    <p>ZJU: 100</p>
                                    <p>FTE: 200</p>
                                    <p>vendor: 200</p>
                                </div>
                            </td>
                            <td>11, Jun, 2012</td>
                        </tr>
                        <!--/ module 1-->
                    </tbody>
                </table>
                <!-- / table -->
            </div>
            <!-- / main content -->
            <!-- footer -->
            <div class="footer">
                <div class="wrap clearfix">
                    <a href="homepage.html" class="logo">Company</a>
                    <ul>
                        <li>
                            <a href="">SSTC</a>
                        </li>
                        <li>
                            <a href="">Atrack</a>
                        </li>
                        <li>
                            <a href="">SSHOME</a>
                        </li>
                        <li>
                            <a href="">LMS</a>
                        </li>
                        <li>
                            <a href="">Support</a>
                        </li>
                        <li>
                            <a href="">eBusiness</a>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- / footer -->
            <!-- fixed elements -->
            <div class="fixed">
                <a title="Go to top" class="btn to_top" href="javascript:;">Go to top</a>
            </div>
            <!-- / fixed elements -->
            <script type="text/javascript" src="./js/jQuery.1.7.2.min.js"></script>
            <script type="text/javascript" src="./js/pris.js"></script>
            <!-- hightcharts -->
            <script type="text/javascript" src="./js/plugins/highcharts/highcharts.js"></script>
            <script type="text/javascript">
            $(function() {
                fedPris.project();

                var strMonth = new Date().getMonth(),
                    strYear = new Date().getFullYear(),
                    strMonYear = strYear + '-' + strMonth + '-1',
                    strTimeTxt = new Date().convertDate(strMonYear).format('MMM, yyyy');

                // left pie start
                var leftPieDataName = $('#left_pie').attr('data-source-chartName'),
                    leftPieDataValue = $('#left_pie').attr('data-source-chartValue'),
                    leftPieChart,
                    leftPieOption = {
                        chart: {
                            renderTo: 'left_pie',
                            type: 'bar',
                            width: 460,
                            height: 480,
                            marginTop: 70,
                            spacingBottom: 20,
                            borderRadius: 0
                        },
                        title: {
                            text: 'Atrack Hours (h)'
                        },
                        subtitle: {
                            text: strTimeTxt,
                            y: 35,
                            style: {
                                    color: '#999',
                                    fontWeight: 'bold',
                                    fontSize: '14px'
                                    }
                        },
                        credits: {
                            enabled: false
                        },
                        xAxis: {},
                        yAxis: {
                            gridLineDashStyle: 'Dot',
                            min: 0,
                            title: {
                                text: '-',
                                margin: 30,
                                style: {
                                        color: '#fff'
                                        }
                            },
                            labels: {
                                x: -5
                            }
                        },
                        colors: prisGCfg.chartColor,
                        legend: {
                            layout: 'vertical',
                            align: 'right',
                            verticalAlign: 'bottom',
                            floating: true,
                            borderWidth: 0,
                            y: 10,
                            backgroundColor: '#fff'
                        },
                        tooltip: {
                            pointFormat: '<b>{point.y} Hours</b>'
                        },
                        exporting: {
                            enabled: false
                        },
                        plotOptions: {
                            series: {
                                dataLabels: {
                                    enabled: true,
                                    color: 'black'
                                }
                            }
                        },
                        series: [{}]
                    }
                // firstly get project name
                $.getJSON(leftPieDataName, function(data) {
                    // then render chart by project name
                    renderLeftPie(data);
                });
                
                // render chart by project name and project data
                function renderLeftPie(name){
                     $.getJSON(leftPieDataValue, function(data) {
                        leftPieOption.xAxis.categories = name;
                        leftPieOption.series = data;
                        if(name.length > 5){
                            leftPieOption.chart.height = name.length * 80;    
                        }
                        leftPieChart = new Highcharts.Chart(leftPieOption);
                    });
                }
                // left pie end

                // right pie start
                var rightPieData = $('#right_pie').attr('data-source-chart'),
                    rightPieChart,
                    rightPieOption = {
                        chart: {
                            renderTo: 'right_pie',
                            type: 'pie',
                            width: 460,
                            height: 480,
                            marginTop: 60,
                            borderRadius: 0
                        },
                        credits: {
                            enabled: false
                        },
                        colors: prisGCfg.chartColor,
                        title: {
                            text: 'Headcount by Project',
                            align: 'center'
                        },
                        plotOptions: {
                            pie: {
                                allowPointSelect: true,
                                borderWidth: 0,
                                cursor: 'pointer',
                                showInLegend: true,
                                dataLabels: {
                                    distance: -20,
                                    color: 'white',
                                    formatter: function() {
                                        return this.y + '%';
                                    }
                                }
                            }
                        },
                        legend: {
                            layout: 'horizontal',
                            x: 30,
                            borderWidth: 0,
                            borderRadius: 0,
                            useHTML: true,
                            labelFormatter: function() {
                                return '<div style="width:150px; margin-left:5px;">' + this.name + ":" + this.y + '%</div>';
                            },
                            itemStyle: {
                                height: '22px',
                                borderRadius: 0
                            }
                        },
                        tooltip: {
                            pointFormat: '<b>{point.y} %</b>'
                        },
                        exporting: {
                            enabled: false
                        },
                        series: [{}]
                    }

                $.getJSON(rightPieData, function(data) {
                    rightPieOption.series = data;
                    rightPieChart = new Highcharts.Chart(rightPieOption);
                });
                // right pie end
            });
            </script>

        </div>
    </body>
    
</html>

