var prisGCfg={chartColor:["#1f5675","#4c89a1","#8ebfd7","#d3eef6","#934821","#d77a3b","#e89e58","#fcd2a5","#cf942a","#ffce31","#f8ef80","#fcfbdf","#216037","#5e9b73","#8fc3a0","#c6e5d1"]};var fedLib={};fedLib.switchable=function(e){var i={container:"",content:"",trigger:"",pageButton:[],steps:1,effect:"fade",autoPlay:false,interval:3000,activeClass:"on",speed:300,eventType:"mouseover",delay:0,init:null,onChange:null},b=0,k=0,l={},q,o,a,s,h,n,c,d,g,m;l=$.extend(i,e);q=$(l.container);o=q.find(l.content);if(q.length<=0||o.length<=0){return false;}a=o.children();s=a.length;h=Math.ceil(s/l.steps);n=q.find(l.trigger).children();c=q.find(l.pageButton[0]);d=q.find(l.pageButton[1]);if(l.init!=null){l.init();}j();p();f();function j(){g=a.eq(0).outerWidth();m=a.eq(0).outerHeight();switch(l.effect){default:case"scrollx":o.css({width:99999,position:"absolute"});a.css({"float":"left"});var t=g*l.steps;for(var u=0;u<l.steps;u++){$(a).eq(s-u-1).clone().prependTo(o);o.css("left",-t);}break;case"scrolly":o.css({position:"absolute"});var v=m*l.steps;for(var u=0;u<l.steps;u++){$(a).eq(s-u-1).clone().prependTo(o);o.css("top",-v);}break;case"fade":a.css({opacity:0,"z-index":0,position:"absolute"});a.eq(0).css({opacity:1,"z-index":1});break;case"visible":a.css({display:"none"});a.eq(0).css({display:"block"});break;}}function r(){if(l.onChange!=null){l.onChange(b,h);}n.eq(b).addClass(l.activeClass).siblings().removeClass(l.activeClass);switch(l.effect){default:case"scrollx":var t=g*l.steps;o.stop().animate({left:-t*b-t},l.speed);break;case"scrolly":var u=m*l.steps;o.stop().animate({top:-u*b-u},l.speed);break;case"fade":a.eq(b).stop().animate({opacity:1}).siblings().stop().animate({opacity:0});a.eq(b).css("z-index",1).siblings().css("z-index",0);break;case"visible":a.eq(b).css("display","block").siblings().css("display","none");break;}}function p(){var t=0;n.each(function(u,v){$(v).bind(l.eventType,function(){clearInterval(t);t=setInterval(function(){b=u;r();clearInterval(t);},l.delay);});});q.bind({mouseenter:function(){clearInterval(k);},mouseleave:function(){f();}});c.click(function(){b--;if(b==-2){b=h-2;if(l.effect=="scrollx"){o.css("left",-g*l.steps*h);}if(l.effect=="scrolly"){o.css("top",-m*l.steps*h);}}r();});d.click(function(){b++;if(b==h){b=0;if(l.effect=="scrollx"){o.css("left",0);}if(l.effect=="scrolly"){o.css("top",0);}}r();});}function f(){if(h<=1){return false;}if(!l.autoPlay){return false;}k=setInterval(function(){b++;if(b==h){b=0;o.css("left",0);}r();},l.interval);}};var imgReady=(function(){var d=[],c=null,b=function(){var e=0;for(;e<d.length;e++){d[e].end?d.splice(e--,1):d[e]();}!d.length&&a();},a=function(){clearInterval(c);c=null;};return function(f,k,m,j){var l,g,n,i,e,h=new Image();h.src=f;if(h.complete){k.call(h);m&&m.call(h);return;}g=h.width;n=h.height;h.onerror=function(){j&&j.call(h);l.end=true;h=h.onload=h.onerror=null;};l=function(){i=h.width;e=h.height;if(i!==g||e!==n||i*e>1024){k.call(h);l.end=true;}};l();h.onload=function(){!l.end&&l();m&&m.call(h);h=h.onload=h.onerror=null;};if(!l.end){d.push(l);if(c===null){c=setInterval(b,40);}}};})();Date.prototype.addDays=function(a){var b=this.valueOf();b+=86400000*a;return new Date(b);};Date.prototype.convertDate=function(c){var b=true;var d=c.split("-");if(d.length!=3){d=c.split("/");if(d.length!=3){return null;}b=false;}var a=new Date();if(b){a.setFullYear(d[0],d[1]-1,d[2]);}else{a.setFullYear(d[2],d[1]-1,d[0]);}a.setHours(0,0,0);return a;};Date.prototype.format=function(b){var a=this;var c=function(g,f){if(!f){f=2;}g=new String(g);for(var e=0,d="";e<(f-g.length);e++){d+="0";}return d+g;};return b.replace(/"[^"]*"|'[^']*'|\b(?:d{1,4}|M{1,4}|yy(?:yy)?|([hHmstT])\1?|[lLZ])\b/g,function(d){switch(d){case"d":return a.getDate();case"dd":return c(a.getDate());case"ddd":return["Sun","Mon","Tue","Wed","Thr","Fri","Sat"][a.getDay()];case"dddd":return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][a.getDay()];case"M":return a.getMonth()+1;case"MM":return c(a.getMonth()+1);case"MMM":return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][a.getMonth()];case"MMMM":return["January","February","March","April","May","June","July","August","September","October","November","December"][a.getMonth()];case"yy":return new String(a.getFullYear()).substr(2);case"yyyy":return a.getFullYear();case"h":return a.getHours()%12||12;case"hh":return c(a.getHours()%12||12);case"H":return a.getHours();case"HH":return c(a.getHours());case"m":return a.getMinutes();case"mm":return c(a.getMinutes());case"s":return a.getSeconds();case"ss":return c(a.getSeconds());case"l":return a.getMilliseconds();case"ll":return c(a.getMilliseconds());case"tt":return a.getHours()<12?"am":"pm";case"TT":return a.getHours()<12?"AM":"PM";}});};Array.prototype.remove=function(b){for(var a=0;a<this.length;a++){if(this[a]==b){this.splice(a,1);break;}}};var fedPris={oldIE:function(){var a=document.createElement("b");a.innerHTML="<!--[if lt IE 9]><i></i><![endif]-->";return a.getElementsByTagName("i").length===1;},tdEvenOdd:function(){var b=("tbody tr"),a=$(b),d=a.find("td"),c;d.each(function(){var g=$(this),e=g.parent(),f=g.attr("rowspan");if(f!=undefined&&f!==""&&f!=="1"){g.addClass("rowspan").parent().addClass("parent");}});$(document).on("mouseenter",b,function(){var f=$(this),e=f.prevAll(".parent").length-1;f.addClass("on");if(f.hasClass("parent")){f.removeClass("parentOn");}else{f.siblings(".parent").eq(e).addClass("parentOn");f.siblings().removeClass("parentOn");}});$(document).on("mouseleave",b,function(){$(this).removeClass("on").siblings().removeClass("parentOn");});},navHover:function(){var a=$(".nav>.wrap>ul>li").index($(".on")),b;$(".nav li").hover(function(){var c=$(this);c.addClass("on").siblings().not(".on").removeClass("on");b=setTimeout(function(){c.children("ul").show();},100);},function(){var c=$(this);clearTimeout(b);c.removeClass("on");c.children("ul").hide();});$(".nav>.wrap>ul>li").mouseleave(function(){$(".nav>.wrap>ul>li").eq(a).addClass("on");});},selectAll:function(){var a=$("#billing_table input:checked").length;if(a===0){$("#billing_table").siblings().find(".black_btn:contains(Submit)").prop("disabled","disabled").addClass("btn_disabled");}$(".main").on("click","input:checkbox",function(){var g=$(this),c,f=g.closest("table"),b=f.find("tbody input:checkbox").not(":disabled"),e=f.find(".select_all input"),d=b.length;if(g.prop("checked")){g.parent().hasClass("select_all")?b.prop("checked",true):g.prop("checked",true);}else{g.parent().hasClass("select_all")?b.prop("checked",false):g.prop("checked",false);}c=f.find("input:checked").not(".select_all input").length;f.siblings().find(".num_toBeSbmt").text(c);if(c===0){f.siblings().find(".black_btn:contains(Submit)").prop("disabled","disabled").addClass("btn_disabled").removeClass("prim");}else{f.siblings().find(".black_btn:contains(Submit)").removeAttr("disabled").removeClass("btn_disabled").addClass("prim");}if(c===d&&d!==0){e.prop("checked","checked");}else{e.removeAttr("checked");}});},toTop:function(){$(".to_top").click(function(){$("html, body").stop().animate({scrollTop:0},400);return false;});function a(){var c=$(".pageWrapper .fixed"),d=$(document).height(),e=$(window).scrollTop(),b=$(window).height();if((d-e-b)<65){c.css({bottom:115-(d-e-b)});}else{c.css({bottom:""});}}$(window).scroll(function(){a();});a();},feedback:function(){$("#to_feedback").click(function(){var c=$(this),a=$(".pop_feedback",this).html(),b="<div id='pop_feedback' class='pop_win_in'><div class='pop_feedback'>"+a+"</div></div>";fedPris.popWinShow({id:"#pop_feedback",maskOut:true,maskIn:false,newPop:b});return false;});},fixedTable:function(){$(".add_row").click(function(a){$(".reject_text").hide();if($(this).hasClass("on")){$(this).removeClass("on");$(".fixed_table").hide();}else{$(this).addClass("on");$(".fixed_table").show();}a.stopPropagation();});$(document).click(function(){$(".fixed_table").hide();$(".add_row, #customize").removeClass("on");});$(document).on("click",".fixed_table",function(a){a.stopPropagation();});},showTip:function(){$(".main").on("mouseenter",".jsTipIco",function(){var a=$(this);a.next(".jsTip").show();a.closest("td").css("zIndex","2");});$(".main").on("mouseleave",".jsTipIco",function(){var a=$(this);a.next(".jsTip").hide();a.closest("td").removeAttr("style");});},rejTextarea:function(){$(".td_action").on("click",".reject",function(a){$(this).next(".reject_text").show();$(this).closest("td").addClass("cur");$(this).closest("tr").siblings().find(".reject_text").hide();$(this).closest("tr").siblings().find(".cur").removeClass("cur");$(".add_row").removeClass("on");$(".fixed_table").hide();a.stopPropagation();});$(document).click(function(){$(".reject_text").hide();});$(document).on("click",".reject_text",function(a){a.stopPropagation();});$(".td_action").on("click",".cancel",function(){$(this).parent().hide();$(".add_row").removeClass("on");$(".fixed_table").hide();});},sortTable:function(c){$("thead th",c).click(function(){var e=$(this).attr("data-type");if(e==undefined||e==""){return;}var h=$(this).closest("table"),g=h.find("thead th").index(this)+1,d=[],i=h.find("tbody tr").not(".editable, .jsTip tr");$.each(i,function(j){d[j]=i[j];});if($(this).hasClass("ascend")){d.reverse();$(this).removeClass("ascend descend").addClass("descend").siblings().removeClass("ascend descend");}else{d.sort(b(g,e));$(this).removeClass("ascend descend").addClass("ascend").siblings().removeClass("ascend descend");}var f=document.createDocumentFragment();$.each(d,function(j){f.appendChild(d[j]);});h.find("tbody").not(".jsTip tbody").prepend(f);fedPris.tdEvenOdd();});function b(e,d){return function(h,g){var f=$(h).find("td:nth-child("+e+")").text().replace(/\s*/,""),i=$(g).find("td:nth-child("+e+")").text().replace(/\s*/,"");if(d!="text"){f=a(f,d);i=a(i,d);if(f<i){return -1;}else{if(f>i){return 1;}else{return 0;}}}else{return f.localeCompare(i);}};}function a(e,d){switch(d){case"int":return parseInt(e);case"float":return parseFloat(e);default:return e.toString();}}return{howSort:b};},prisTab:function(c,b){if(c===undefined){c===".tab";}var a=b,g=$(c+">.tab_tit"),f=$(c+">.tab_con"),d=$(c+">.tab_tit>li"),e=$(c+">.tab_tit>.on"),a=d.index(e);if(a==undefined||a==""||a=="-1"){$("li",g).eq(0).addClass("on").siblings().removeClass("on");f.eq(0).show().siblings(".tab_con").hide();}else{$("li",g).eq(a).addClass("on").siblings().removeClass("on");f.eq(a).show().siblings(".tab_con").hide();}$(".main").on("click","li",function(){a=$(this).parent().children("li").index($(this));$(this).addClass("on").siblings().removeClass("on");$(this).parent().siblings(".tab_con").eq(a).show().siblings(".tab_con").hide();});return a;},inputTips:function(a){var h=(".text, textarea"),g=$("input:disabled, textarea:disabled, textarea[readonly=readonly], select:disabled"),e;if(a==undefined||a==""){e=$("input[tip], textarea[tip]");}else{e=$("input[tip], textarea[tip]",a);}for(var d=0;d<e.length;d++){var k=e.eq(d),c=k.attr("tip"),f=k.attr("value");if(f==undefined||f==""||f==c){k.val(c);k.addClass("default");}else{k.addClass("normal");}}for(var b=0;b<g.length;b++){g.eq(b).addClass("disabled");}$(document).on("click",h,function(){var j=$(this),i=j.attr("tip");j.addClass("on");if(j.val()==i){j.val("");j.addClass("normal");}});$(document).on("blur",h,function(){var j=$(this),i=j.attr("tip");j.removeClass("on");if((j.val()).replace(/\s*/g,"")==""){j.val(i);j.removeClass("normal").addClass("default");}});},clearIptDefaultVal:function(){var a=$("input[tip], textarea[tip]");a.each(function(){var b=$(this);if(b.val()==b.attr("tip")){b.val("");}});},modShowHide:function(d){$(".mod_toggle").each(function(){var j=$(".mod_input",this),h=j.length,g;for(g=0;g<h;g++){j.eq(g).attr("data-mod-idx",g);j.eq(g).find(".tit_index").text(g+1);j.eq(0).addClass("mod_input_first");}});var e,f,c,b=0;c=window.location.hash;if(c!=undefined||c!=""){$(c).addClass("on").siblings(".mod_toggle").removeClass("on");}if(d!=undefined||d!=""){$(".mod_toggle").eq(d).addClass("on");$(".mod_toggle").eq(d).children(".upload_tip").hide();$(".mod_toggle").eq(d).find(".toggle_con").show();}$(".mod_toggle").delegate(".addIco","click",function(){var g=$(this).closest(".mod_toggle");c=$(this).closest(".mod_toggle").attr("id");e=$(this).parent().siblings(".toggle_con").find(".mod_input:eq(0)");if(g.hasClass("on")){g.removeClass("on");}else{g.addClass("on").siblings(".mod_toggle").removeClass("on");g.siblings(".mod_toggle").find(".upload_tip").show();window.location.hash=c;}});$(".newInfoIco").click(function(j){var h=$(this).closest(".mod_toggle").find(".mod_input"),k=h.attr("data-mod-idx"),g=parseInt($(this).closest(".mod_toggle").find(".mod_input:last").attr("data-mod-idx"));e=$(this).parent().siblings(".toggle_con").find(".mod_input:eq(0)");b=g+1;f=e.clone().removeClass("mod_input_first").attr("data-mod-idx",b);var i=$(f);a("label",f,"for");a(".text, select, textarea",f,"id");a(".text, select, textarea",f,"name");a(".field-validation-valid, .field-validation-error",f,"data-valmsg-for");a(".field-validation-valid span, .field-validation-error span",f,"for");$(f).insertBefore($(this).closest(".mod_toggle").find(".toggle_con .upload_tip"));$.validator.unobtrusive.parseDynamicContent(i);fedPris.inputTips(f);j.stopPropagation();});function a(i,g,h){$(i,g).each(function(){var j=$(this).attr(h),k,l=$(this).attr("data-copy");if(/\d+/g.test(j)===true){k=j.replace(/\d+/g,b);}else{k=j+"_"+b;}if($(".tit_index",g)){$(g).find(".tit_index").text(b+1);}if($(i).hasClass("field-validation-error")){$(".field-validation-error span",g).remove();$(".field-validation-error",g).attr("class","field-validation-valid");}$(".input-validation-error",g).removeClass("input-validation-error");$(".hasDatepicker",g).removeClass("hasDatepicker");if(j!=undefined&&j!=""){$(this).attr(h,k);}if(l===undefined||l===""){$(this).val("").removeClass("normal");}});}$(".toggle_con").delegate(".delInfoIco","click",function(){var h=$(this).closest(".toggle_con").find(".mod_input").index($(this).parent()),g=$(this).closest(".toggle_con").find(".mod_input").length-1;if(h!=0&&h==g){$(this).parent().remove();}});$("#Summary").focus(function(){$(this).parent().addClass("on");}).blur(function(){$(this).parent().removeClass("on");});},showCustomize:function(){$("#customize").click(function(a){$(this).addClass("on");$(".fixed_table").show();a.stopPropagation();});},datePicker:function(){var a=new Date().getFullYear(),b={selectedYear:a,startYear:a-2,finalYear:a+2};try{$("#from, #to, .only_month").monthpicker(b).bind("monthpicker-hide",function(){var e=$(this),d=e.val();if(d!=""){e.addClass("normal");}});}catch(c){}$("body").on("focus",".date_month",function(){var f=$(this),g=f.attr("max-date"),e=f.attr("min-date"),d={changeMonth:true,changeYear:true,minDate:"-10y",maxDate:"0",onClose:function(){var i=$(this),h=i.val();if(h!=""){i.addClass("normal");}setTimeout(function(){i.trigger("blur");},100);}};if(f.attr("id")==="Birthdate"){d.minDate="-80y";d.maxDate="-10y";d.defaultDate="-30y";}else{if(g===undefined&&e===undefined){d=d;}else{if(g!==undefined&&e===undefined){d.maxDate=g;}else{if(g===undefined&&e!==undefined){d.minDate=e;}else{if(g!==undefined&&e!==undefined){d.maxDate=g;d.minDate=e;}}}}}f.datepicker(d);});$("body").on("focus",".date_month_meeting",function(){$(this).datepicker({changeMonth:true,changeYear:true,minDate:"-10y",maxDate:"+1y",onClose:function(){var e=$(this),d=e.val();if(d!=""){e.addClass("normal");}setTimeout(function(){e.trigger("blur");},100);}});});$(".ui-datepicker").click(function(d){d.stopPropagation();});},rangeSelect:function(){var a=new Date().getMonth();$(".tab_chart .auto_btn_h16").click(function(){$(this).addClass("on").siblings(".auto_btn_h16").removeClass("on");});$("#6_month").click(function(){var c=$("#report_con_1").highcharts(),b=a-5;if(b<1){c.xAxis[0].setExtremes(0,5);}else{c.xAxis[0].setExtremes(b,a);}});$("#ytd").click(function(){var b=$("#report_con_1").highcharts();b.xAxis[0].setExtremes(0,a);});$("#1_year").click(function(){var b=$("#report_con_1").highcharts();b.xAxis[0].setExtremes(0,11);});},staffTableClass:function(a){$(a).delegate("thead th","click",function(){$("tbody tr",a).removeClass("first_tr");fedPris.staffTableClass(a);});},editSlctProj:function(){$(".act_edit").click(function(){var a=$(this).parent().siblings(".staff_table");$(this).hide().siblings(".act_more").show();a.find(".proj_slct").show();a.find(".proj_slct").siblings(".proj_slcted").hide();return false;});$(".act_cancel").click(function(){var a=$(this).parent().parent().siblings(".staff_table");$(this).parent().hide();$(this).parent().siblings(".act_edit").show();a.find(".proj_slcted").show();a.find(".proj_slcted").siblings(".proj_slct").hide();});},projStatus:function(){var c=$("#p_number"),b=parseInt(c.text()),a;if(1<b&&b<11){a=1;}else{if(10<b&&b<21){a=2;}else{if(20<b&&b<31){a=3;}else{if(30<b&&b<41){a=4;}else{if(40<b&&b<51){a=5;}else{if(50<b&&b){a=6;}}}}}}switch(a){case 1:d("1");break;case 2:d("2");break;case 3:d("3");break;case 4:d("4");break;case 5:d("5");break;case 6:d("6");break;default:d("0");}function d(e){$(c).closest("li").attr("class","status_"+e);}},clickBrowse:function(a){$("#tip_imgLoading").remove();if(a==="extError"||a==="sizeError"){$("#up_erorMsg").show().text("Image should be Jpg, GIF or PNG, and less than 200kb.");}else{if(a==="error"){$("#pop_crop .editPhotoArea").append("<p id='tip_imgLoading' class='mt tc tip_imgLoading'>Unable to upload image. Please try again.</p>");}else{fedPris.popWinShow({id:"#pop_crop",maskOut:true,maskIn:false});$("#up_erorMsg").hide();$("#pop_crop .editPhotoArea").append("<p id='tip_imgLoading' class='mt tc'>Loading...</p>");}}},getImgUrlFromServer:function(a){$("#tip_imgLoading").hide();fedPris.previewImg("#userImg",a);},uploadingImg:function(){$("body").delegate(".fileBrowser","click",function(){var a=$(this).parent();$(".fileInput",a).trigger("click");});$(".jsDiscardLink").click(function(){window.jcropApi.destroy();$(".fileField  .fileNameDisplay").html("No file selected").addClass("fileNameDisplayNoFile");if(window.jcropApi){window.jcropApi.destroy();window.jcropApi=false;}$(".editPhotoArea").html("");$("#previewImg").attr("src","./images/photo-preview.png").css({width:"",height:"","margin-left":"","margin-top":""});});},previewImg:function(b,d){var a=d+"&time="+(new Date()).getTime();window.jcropApi=false;$(".editPhotoArea").html('<img alt="" src="" id="userImg">');var c=$(b);c.attr("src",a);$("#previewImg, #getImgSize").attr("src",a);if(window.jcropApi){window.jcropApi.destroy();window.jcropApi=false;}if(window.timer){window.clearTimeout(window.timer);}window.timer=setTimeout(function(){imgReady(d,function(){var g=this.width;if(g!==0){var e=$("#userImg").width();var f=$("#userImg").height();window.jcropApi=$.Jcrop("#userImg",{onChange:fedPris.showPreview,onSelect:fedPris.showPreview,keySupport:false,maxSize:[398,398],aspectRatio:(110/130),setSelect:[0,0,398,398]});}});},1000);},showPreview:function(b){var c=110/b.w;var a=130/b.h;c=(c==0)?1:c;a=(a==0)?1:a;photoX=$("#userImg").width();photoY=$("#userImg").height();$("#previewImg").css({width:Math.round(c*photoX)+"px",height:Math.round(a*photoY)+"px",marginLeft:"-"+Math.round(c*b.x)+"px",marginTop:"-"+Math.round(a*b.y)+"px"});},meetRoomScrol:function(){$(".mapIco").click(function(){var d=$(this),b=$(this).parent(),a=d.siblings(".room_intro"),c="<div id='pop_room_intro' class='pop_win_in pop_room_intro'><div class='room_intro'>"+a.html()+"</div></div>";fedPris.popWinShow({id:"#pop_room_intro",maskOut:true,maskIn:false,newPop:c,fixed:false});$("#pop_win .pop_loading").hide();});$("#meet_room").on("click",".meet_scroll_btn",function(){var c=$(this),b=$(".meet_cale_in");if(c.hasClass("on")){$(".meet_scroll_btn").removeClass("on");b.removeAttr("style");$(".meet_cale").removeAttr("style");}else{$(".meet_scroll_btn").addClass("on");b.stop().animate({top:-45},400);$(".meet_cale").css("height",1436);}if(c.hasClass("up")){window.location.hash="meet_room";}else{var a=$("body")[0].scrollHeight-$(window).height();$("html, body").stop().animate({scrollTop:a},400);}});},meetRoomChosDate:function(){var J=$("#cur_date").val(),E=new Date().convertDate(J),f=("0"+E.getDate()).slice(-2),B=("0"+(E.getMonth()+1)).slice(-2),q=E.getFullYear(),r,L=q+"-"+B+"-"+f,i=$(".tab_con"),g=new Array(7),a=$("#data_meeting_prefix").val()+"?date="+L+"&"+$(".tab_tit").find(".on").attr("data-meeting"),D=$(".tab_tit .on").attr("data-room"),h,h,N,G,y,o,b,O,x=$("#cur_eid").val(),j=$("#cur_ename").val(),m={},e,t=$(".tab_tit .on").text(),s=$(".tab_tit .on"),k=$("#meet_room .tab_tit li").index(s),K=$(".meet_cale_in").eq(k);g[0]="Sunday";g[1]="Monday";g[2]="Tuesday";g[3]="Wednesday";g[4]="Thursday";g[5]="Friday";g[6]="Saturday";A(K,a,D,L);r=g[E.getDay()].slice(0,3);H(i,q,B,r,f);function H(T,W,R,X,V){var U=$(".date_chos .date strong",T),S=$(".date_chos ins",T),Q=$(".date_chos .date em",T),P=W+"-"+R+"-"+V;S.text(W+"."+R);Q.text(X);U.text(V);$(".date_chos .date_month_meeting",T).attr("data-time",P);}function A(P,S,Q,R){fedPris.popWinShow({id:".pop_loading",maskIn:true,maskOut:false});$(P).cal("destroy");$.getJSON(Q,function(U){var V=U,T=U.meetingRoomId.length;I(P,T);M(P,S,V,R);});}function I(U,Q){var T=Q,S=92*T+71,R=$(U).closest(".tab_con_out"),P=$(U).parent();if(Q>11){R.removeClass("x_scroll").addClass("x_scroll");$(U).closest(".tab_con_in").css("width",S+"px");}}function M(P,T,V,Q){var R=V,U=R.meetingRoomId.length,S=$(P).parent();$.getJSON(T,function(W){var X=W;if(X===null||R===null){return;}$(P).cal({resources:R.resource,daystodisplay:1,minwidth:92,gridincrement:"30 mins",maskeventlabel:"H:i",masktimelabel:{"00":"H:i","30":"--"},allowresize:false,allowmove:false,allowselect:false,allowremove:true,allownotesedit:false,allowoverlap:false,allowhtml:true,startdate:Q,events:X,onload:function(){n();u(P,R.meetingRoomId);if(U>11){F(S);}},eventremove:function(Z,Y){c(Y.uid);}});}).done(function(){z();});}function F(R){var Q=$(R).closest(".tab_con_out"),P=Q.scrollLeft();$(".meet_scroll_btn",Q).css("left",P+14);$(".ui-cal-timeline",Q).css("left",P);Q.scroll(function(){var T=$(this),S=T.scrollLeft();$(".meet_scroll_btn",Q).css("left",S+14);$(".ui-cal-timeline",Q).css("left",S);});}function C(U,T){var Q=[],P=[],R,S;if(T==="upDown"){$(U).each(function(){R=$(this).offset().top;Q.push(R);});}else{$(U).each(function(){S=$(this).offset().top+$(this).outerHeight();Q.push(S);});}P=$.unique(Q);return P;}function c(P){var Q=$("#data_post_delete").val()+"?bookingId="+P;fedPris.popWinShow({id:".pop_loading",maskIn:true,maskOut:false});$.post(Q,function(R){if(R.success===true){z();}});}function u(P,S){var T=$(".ui-cal-date",P),Q=T.length,R;for(R=0;R<Q;R++){T.eq(R).attr("meetingRoomId",S[R]);}}function n(){var P=parseFloat($("#cur_date").val().replace(/-/g,"")),S=$("#meet_room .tab_tit li").index($("#meet_room .tab_tit .on")),T=parseFloat($("#meet_room .tab_con").eq(S).find(".date_chos .date_month_meeting").attr("data-time").replace(/-/g,"")),R=[],U,Q;if(T<P){$("#meet_room .tab_con").eq(S).find(".meet_cale_in_mask").show();return;}$(".ui-cal-date").selectable({delay:0,start:function(V){var W=$(this).attr("meetingroomid");R.length=0;w(W);U=V.pageY;},selecting:function(X,Z){var V=$(".ui-selecting").length,Y=$(".ui-selecting:last").offset().top-(V*30)+30,W=$(".ui-selecting:last").offset().top+30,aa;Q=X.pageY;if(V>1){if(Q<U){R=C(".cur_cal_event","downUp");aa=$.inArray(Y,R);}else{R=C(".cur_cal_event","upDown");aa=$.inArray(W,R);}if(aa!==-1){$(".ui-cal-date").selectable("disable");}}$(".cur_cal_event").bind("hover",l);},stop:function(){var X=$(this).attr("resource"),V=$(this).attr("meetingRoomId"),W=$(".ui-cal-time",this).index($(".ui-selected:last"));y=$(".ui-selected:first",this).attr("time");if(W===47){o="00:00:00";}else{o=$(this).find(".ui-selected:last").next().attr("time");}b=parseFloat(y.replace(/:/,""));O=parseFloat(o.replace(/:/,""));$(".cur_cal_event").unbind("hover",l);$(".ui-cal-event").removeClass("cur_cal_event");p(b,O,X,V);}});}function w(P){$(".ui-cal-event").each(function(){var Q=$(this).attr("meetingroomid");if(Q===P){$(this).addClass("cur_cal_event");}});}var l=function(){var P=$(this);$(".ui-cal-date").selectable("disable");};function p(V,P,Q,ac){var U=$("#meet_room .tab_tit li").index($("#meet_room .tab_tit .on")),R=$("#meet_room .tab_con").eq(U).find(".date_chos .date_month_meeting").attr("data-time"),ae=parseFloat($("#cur_uidSum").val()),ab,X=$(".ui_cal_hovered:first"),W=$(".ui_cal_hovered:last");ab=$(".ui_cal_hovered").length;$("#cur_uidSum").val(ae+1);fedPris.popWinShow({id:".pop_meeting",maskOut:true,maskIn:false});m.uid=ae;m.resource=Q;m.roomId=ac;m.title=j;m.eid=x;m.begins=R+" "+y;m.ends=R+" "+o;if(o==="00:00:00"){var T=new Date().convertDate(R),aa=T.addDays(1),Y=("0"+aa.getDate()).slice(-2),S=("0"+(aa.getMonth()+1)).slice(-2),ad=aa.getFullYear(),Z=ad+"-"+S+"-"+Y;m.ends=Z+" "+o;}else{m.ends=R+" "+o;}$("#new_meet_time").text(m.begins.slice(0,16)+" -- "+m.ends.slice(0,16));$("#new_meet_requ").text(j);V=null;P=null;y="";o="";$(".ui-cal-date").selectable("enable");}$("body").on("click","#pop_win .delInfoIco, #pop_win_mask",function(){d();});$("body").on("click","#pop_win .js_sbmt_meet",function(){var Q=$("#meet_room .tab_tit li").index($("#meet_room .tab_tit .on")),P=$("#meet_room .tab_con").eq(Q).find(".meet_cale_in "),R=$("#data_post_new").val();fedPris.popWinShow({id:".pop_loading",maskIn:true,maskOut:false});e=$("#new_meet_subj").val();m.notes=e;$.post(R,m,function(S){if(S.success===true){m.uid=S.uid;v(P,m);$("#pop_win_mask, #pop_win .pop_meeting, #pop_win .pop_win_in_mask").hide();}else{$("#meeting_eror_tip").text(S.message);$("#pop_win .pop_meeting, #pop_win .pop_win_in_mask").hide();$("#pop_win_mask, #pop_win .pop_meeting_eror").show();}z();});d();});function d(){$(".ui-cal-time").removeClass("ui-selected");$(".ui-cal-event").removeClass("ui_cal_hovered");$("#pop_win_mask, #pop_win .pop_meeting, #pop_win .pop_meeting_eror").hide();$("#new_meet_subj").val("");}function z(){$("#pop_win .pop_loading, #pop_win .pop_win_in_mask").hide();}function v(P,Q){$(P).cal("add",Q);}$(".main").on("change",".date_chos .date_month_meeting",function(){var V=$(this);V.datepicker("option","dateFormat","yy-mm-dd-DD");var Q=V.val(),T="true",P=V.closest(".tab_con").find(".meet_cale_in"),S=".tab_con",R=Q.slice(0,10),U=V.closest(".tab_con").siblings(".tab_tit").find(".on").text();q=Q.slice(0,4);B=Q.slice(5,7);r=Q.slice(11,14);f=Q.slice(8,10);a=$("#data_meeting_prefix").val()+"?date="+R+"&"+$(".tab_con:first").siblings(".tab_tit").find(".on").attr("data-meeting");D=$(".tab_tit .on").attr("data-room");H(S,q,B,r,f);A(P,a,D,R);});$(".main").on("click","#meet_room .tab_tit li",function(){var S=$(this),P=$("#meet_room .tab_tit li").index(S),Q=$(".meet_cale_in").eq(P),R=$(".date_month_meeting").eq(P).attr("data-time");a=$("#data_meeting_prefix").val()+"?date="+R+"&"+S.attr("data-meeting");D=$(this).attr("data-room");curBuilding=S.text();A(Q,a,D,R);});},setDaultRoom:function(){var a=fedPris.prisTab("#meet_room");b(a);function b(e){var g=$("#meet_room .tab_tit li"),d=g.eq(a).text(),f=$(".tab_defauRoom_val"),c=g.eq(e).attr("data-status");g.eq(a).attr("data-status","default");f.val(d);$(".tab_defauRoom_val").click(function(){var j=$(this).parent(),h=$("#meet_room .tab_tit li").index($("#meet_room .tab_tit .on")),l=g.eq(h).text(),i=j.attr("data-post-defauRoom"),k;if(f.prop("checked")===false){f.val("");}else{f.val(l);k=j.attr("data-post-defauRoom")+"?floor="+l;$.post(k,function(m){});}g.eq(h).attr("data-status","default").siblings().removeAttr("data-status");});g.click(function(){var h=$(this);c=h.attr("data-status");if(c===undefined||c===""){f.prop("checked",false);}else{f.prop("checked",true);}});}},titleTips:function(b){var d,c,g,h,a,j,f,i,e;if(b===undefined){d=".tit_tip, input, div, button, i, span";}else{d=b;}$(d).mouseenter(function(){var k=$(this);e=k.attr("data-title");g=k.attr("title");if(e==="no_tit_tip"||g===undefined){return;}if(e==undefined||e==""){g=this.title;k.attr("data-title",g);}else{g=e;}this.title="";f=k.outerHeight();i=k.outerWidth();if(g!=undefined&&g!=""){a=k.offset().left;j=k.offset().top+f+8;if($("#tool_tip").length===0){h='<div id="tool_tip" class="tool_tip" style="left:'+a+"px; top:"+j+'px;"><i></i><div class="tool_txt">'+g+"</div></div>";$(".pageWrapper").append(h);}else{$("#tool_tip").css({left:a,top:j});$("#tool_tip .tool_txt").html(g);}if(b!==undefined){c=b.replace(/[.#]/,"")+"_tool_tip";$("#tool_tip").addClass(c);}$("#tool_tip").show();}}).mouseleave(function(){$("#tool_tip").hide();$("#tool_tip").attr("class","tool_tip");});},popWinShow:function(e){var j=$("#pop_win"),f=$(".pop_win_in"),l=$("#pop_win_mask"),k=$("#pop_win .pop_win_in_mask"),h={maskOut:true,maskIn:false,autoClose:false,outAreaClose:true,fixed:true},d,b,g,i;var a={};a=$.extend(h,e);j.attr("style","");$(a.id).show().siblings().hide();a.maskOut===true?l.show():l.hide();a.maskIn===true?k.show():k.hide();if(a.newPop!==undefined){if($(a.id).length===0){j.append(a.newPop);}$(a.id).show().siblings().hide();}if(a.autoClose!==false){setTimeout(function(){d();},a.autoClose);}if(a.outAreaClose===true){l.click(function(){d();});}if(a.fixed){j.removeClass("pop_win_absolute");}else{j.addClass("pop_win_absolute");var c=$(window).scrollTop()+50;if(c>150){j.css("top",c);}}b=$(a.id).outerWidth();g=-($(a.id).outerHeight()/2)+"px";i=-(b/2)+"px";j.css({width:b,marginTop:g,marginLeft:i});j.on("click",".pop_win_close",function(){d();});d=function(){a.newPop===undefined?$(a.id).hide():$(a.id).remove();f.hide();l.hide();k.hide();};},closeAllPop:function(d){var b=$("#pop_win .pop_win_in"),a=$("#pop_win_mask"),c=$("#pop_win .pop_win_in_mask");if(d===undefined){b.hide();a.hide();c.hide();}else{setTimeout(function(){b.hide();a.hide();c.hide();},d);}},confirmDialog:function(c){var b={id:"#pop_win_unlock",message:"",clickId:null,excuFun:null};var a={};a=$.extend(b,c);if(a.message!==""){$(".js_message",a.id).text(a.message);}if(a.excuFun!==null&&a.clickId!==null){$(a.clickId).unbind().bind("click",function(){(a.excuFun&&typeof(a.excuFun)==="function")&&a.excuFun();});}fedPris.popWinShow({id:a.id,maskIn:true,maskOut:true});},dialog:function(d){var e={id:"#pop_win_dialog",message:"",type:"confirm",btnOkTxt:"Ok",btnCancelTxt:"Cancel",clickId:null,excuFun:null},i,b,c,f,h,g;var a={};a=$.extend(e,d);i=a.id.replace(/[.|#]/g,"");c="<div id='"+i+"' class='pop_win_in pop_win_dialog'>";f="</div>";a.message===""?h="":h="<p class='tc js_message'>"+a.message+"</p>";if(a.type==="confirm"){g="<p class='tc mt'><button class='auto_c_btn cancel pop_win_close' type='button'>"+a.btnCancelTxt+"</button><button class='auto_c_btn prim sbmt' type='button'>"+a.btnOkTxt+"</button></p>";}else{g="<p class='tc mt'><button class='auto_c_btn prism pop_win_close' type='button'>"+a.btnOkTxt+"</button></p>";}b=c+h+g+f;$("#pop_win").append(b);if(a.excuFun!==null&&a.clickId!==null){$(a.clickId).unbind().bind("click",function(){(a.excuFun&&typeof(a.excuFun)==="function")&&a.excuFun();});}fedPris.popWinShow({id:"#"+i,maskIn:true,maskOut:true});$("#pop_win").on("click",".pop_win_close",function(){$(a.id).remove();});},addHeadc:function(){$(document).on("click",".action_p",function(a){var b=$(this);b.siblings(".pop_headc").show();b.closest("tr").siblings().find(".pop_headc").hide();a.stopPropagation();});$(document).on("click",".pop_headc .close",function(){$(this).closest(".pop_headc").hide();});$(document).click(function(){$(".pop_headc").hide();});$(document).on("click",".pop_headc",function(a){a.stopPropagation();});},print:function(){$(".black_btn:contains('Print'), .print_btn").click(function(){window.print();});},renderDataToTit:function(a,l){var c,h,f,d,e,k,i;if(a.start===null||a.allDay===true){c="";}else{c="<strong>Start: </strong><br/>"+a.start.format("yyyy-MM-dd HH:mm:ss");}if(a.end===null||a.allDay===true){h="";}else{h="<strong>End: </strong><br/>"+a.end.format("yyyy-MM-dd HH:mm:ss");}if(a.start!==null&&a.end!==null&&a.allDay!==false&&a.start.getDate()!==a.end.getDate()){c="<strong>Start: </strong><br/>"+a.start.format("yyyy-MM-dd HH:mm:ss");h="<strong>End: </strong><br/>"+a.end.format("yyyy-MM-dd HH:mm:ss");}if(a.title===""){f="";}else{f=a.title;}if(a.location===""){d="";}else{d="<strong>Location: </strong><br/>"+a.location;}if(a.description===""){e="";}else{e="<strong>Description: </strong><br/>"+a.description;}var b=/^<.*\>/,j=String(b.exec(f)),g=j.replace(/<|>/g,"").toLowerCase();switch(g){case"work day":i="workingDay";break;case"giactivity":i="activityDay";break;case"training":i="trainingDay";break;case"holiday":i="holiday";break;default:}k="<p>"+f+"</p><p>"+c+"</p><p>"+h+"</p><p>"+d+"</p><p>"+e+"</p>";$(l).addClass(i).attr("title",k).attr("target","_blank");if(g!=="giactivity"){$(l).removeAttr("href");}},renderSourceToFullCal:function(b,d,a){var c=[];$.ajax({type:"get",url:"http://hzmis/Proxy/api/sp_calendar?site=gihz&title=gi-calendar",success:function(e){$.each(e,function(f,g){c.push({id:g.row.ows_ID,title:"<"+a+">"+g.row.ows_Title,allDay:g.row.ows_fAllDayEvent,start:g.row.ows_EventDate,end:g.row.ows_EndDate,location:g.row.ows_Location,description:g.row.ows_Description,url:"https://collaborate.statestr.com/sites/gihz/Lists/GICalendar/DispForm.aspx?ID="+g.row.ows_ID});});$("#mod_l_calendar").fullCalendar("addEventSource",c);}});},renderNewsToIdx:function(e){var c,a,d="",b=e;if(b==="#gihz"){$.ajax({type:"get",url:"http://hzmis/Proxy/api/SP_List?site=gi&title=GI%20Activities",success:function(f){f.length>5?a=5:a=f.length;for(c=0;c<a;c++){d+="<li class='item clearfix'><img src='"+f[c].row.ows_Pic.replace(/,/g,"")+"' /><div class='img_r'><h5><a target='_blank' href='"+f[c].row.ows_URL.split(",")[0]+"'>"+f[c].row.ows_LinkTitle+"</a></h5><p>"+f[c].row.ows_Time+"</p><p class='desc'>"+f[c].row.ows_Venue+"</p></div></li>";}$(b).html(d);}});}},changeTitStatus:function(){var a=$(".proj_status:checked").val();if(a==="Close"){$("#proj_titName .editIco_l").hide();fedPris.disableIpt("#edit_proj","close",".not_disable");}$(".proj_status").change(function(){var b=$(this);a=b.val();if(a==="Open"){$("#proj_titName .editIco_l").show();fedPris.disableIpt("#edit_proj","open",".not_disable");}else{$("#proj_titName .editIco_l").hide();fedPris.disableIpt("#edit_proj","close",".not_disable");}});$("#proj_titName .editIco_l").click(function(){var c=$(this);if(c.hasClass("save_ico")){var b=c.siblings(".proj_titName_ipt").val();c.siblings(".proj_titName_ipt").hide();c.siblings("span").text(b).show();c.removeClass("save_ico");}else{$(".proj_titName_ipt").show();c.addClass("save_ico").siblings("span").hide();}});},disableIpt:function(e,a,b){var d=$(".text, select",e).not(b),c=$("textarea",e).not(b);if(a==="open"){d.removeProp("disabled").removeClass("disabled");c.removeProp("readonly").removeClass("disabled");}else{d.prop("disabled","disabled").addClass("disabled");c.prop("readonly","readonly").addClass("disabled");}},selectMulti:function(d){var b=d.replace(/[.#]/,""),a=d+" .js_parent";try{document.getElementById(b).onselectstart=function(){return false;};}catch(c){}$(d).on("click",".js_parent",function(m){var k=$(this),q=$(a),l=k.parent().find(".selected"),n=l.length,h=q.index(k);if(k.hasClass("selected")){if(m.ctrlKey||m.shiftKey){k.removeClass("selected");}else{n===0?k.removeClass("selected"):k.siblings().removeClass("selected");}}else{m.ctrlKey?k.addClass("selected"):k.addClass("selected").siblings().removeClass("selected");if(m.shiftKey){q.removeClass("selected");if(n===0){q.removeClass("selected");for(var f=0;f<(h+1);f++){q.eq(f).addClass("selected");}}else{var p=[],o,g,j;l.each(function(){o=q.index($(this));p.push(o);});g=Math.min.apply(Math,p);j=Math.max.apply(Math,p);if(h>j){for(var f=g;f<(h+1);f++){q.eq(f).addClass("selected");}}else{if(h<g){for(var f=h;f<(j+1);f++){q.eq(f).addClass("selected");}}}}}}});$(d).on("dblclick",".js_parent",function(){var f=$(this),e=f.parent();if(e.hasClass("js_tls_result")){$(".to_l",d).triggerHandler("click");}else{$(".to_r",d).triggerHandler("click");}});$(".tls_btn span",d).click(function(){var f=$(this);if(f.hasClass("to_r")){fedPris.moveSlctToR(d);}else{var e;$(".js_tls_result .selected",d).each(function(){var g=$(this);e=g.attr("eid");$(".tls_table .js_parent[eid='"+e+"']",d).show().removeClass("selected js_none");g.remove();});}});},moveSlctToR:function(g){var e="",b,d,c,f,a;c=$(".tls_table .selected",g);a=$(".tls_result",g);c.each(function(){b=$("td:first",this).text(),d=$("td:last",this).text(),f=d.replace(/\'/,"-");e+="<p class='js_parent' ename='"+f+"' eid="+b+"><span class='js_child'>"+b+"</span>/<span class='js_child'>"+d+"</span></p>";});c.addClass("js_none").removeClass("selected").hide();$(e).appendTo(a);},selectTL:function(f){var a,c=$(".tls_slct_btn"),e,d=f+" .js_tls_ipt .text";$(".tls_selected_list").each(function(){var i=$(this),h=$("p",i),g=h.length;if(g>0){i.show();}});c.click(function(){if($(".proj_status:checked").val()==="Close"||$("input#close").length===0){return;}var k=$(this),g=k.parent().siblings(".label").text().replace(/\*|\:/g,"")+" selector",j=$(d).removeClass("normal").attr("tip"),i=k.attr("data-source-idName"),h=$(".js_parent",f).length;if(h===0){$(".js_table .in",f).append("<p id='tls_tip' class='mt tc'>Loading, please wait...</p>");$.getJSON(i,function(l){var m=l;b(m);fedPris.listFilter(d,(f+" .js_table .js_parent"));}).done(function(){$("#tls_tip").hide();});}$(f+">h4").text(g);$(d).val(j);a=$(".tls_slct_btn").index(k);$(f).attr("data-idx",a);$(".js_tls_result",f).html("");$(".js_table tbody tr",f).show().removeClass("selected js_none");fedPris.selectMulti(f);k.siblings(".tls_selected_list").find(".js_parent").each(function(){var l=$(this).attr("eid");$(".tls_table .js_parent[eid='"+l+"']",f).addClass("selected");});fedPris.moveSlctToR(f);fedPris.popWinShow({id:f,maskOut:true,maskIn:false});});function b(l){var k=l,g=k.length,j,h="";for(j=0;j<g;j++){h+="<tr class='js_parent' eid="+k[j].id+"><td>"+k[j].id+"</td><td>"+k[j].name+"</td></tr>";}$(".js_table tbody",f).html("").append(h);}$(".sbmt",f).click(function(){var m=[],k={},g,j,h,n,l="",i=$(".tls_selected_list").eq(a);$(".js_tls_result p",f).each(function(){var o=$(this);k.id=o.attr("eid"),j=k.id.replace(/^[A-Za-z]/gi,""),k.name=o.attr("ename");n=k.name.replace(/\-/,"'");l+="<p class='js_parent' ename='"+k.name+"' eid="+k.id+"><a href='/Profile/Edit?userId="+j+"'><span class='js_child'>"+k.id+"</span><span>/</span><span class='js_child'>"+n+"</span></a><i class='delIco'></i></p>";m.push(k);});if(m.length===0){return;}i.html("").append(l).show();$("#pop_win_mask, "+f).hide();fedPris.storeSlctVal(i,a);});$(".tls_selected_list").on("click",".delIco",function(){if($(".proj_status:checked").val()==="Close"||$("input#close").length===0){return;}var k=$(this),j=$(".tls_slct_btn").index(k.closest(".tls_selected_list").siblings(".tls_slct_btn")),h=k.parent().attr("eid"),g=$(".tls_selected_list p").length-1,i=$(".tls_selected_list").eq(j);if(g===0){$(".tls_selected_list").hide();}k.parent().remove();fedPris.showDeleted(h,f);fedPris.storeSlctVal(i,j);});},listFilter:function(b,c){var a=$(c);$(b).keyup(function(){var f=$(this),e=f.val(),d=e.length;if(d>1){a.each(function(){var h=$(this),g=h.text();setTimeout(function(){h.hasClass("js_none")||g.search(new RegExp(e,"i"))<0?h.hide():h.show();},500);});}else{a.not(".js_none").show();}});},showDeleted:function(b,d){var a=b,c=d;$(".js_table tbody tr",c).each(function(){var f=$(this),e=f.attr("eid");if(e===a){f.show();}});$(".js_tls_result .js_parent",c).each(function(){var f=$(this),e=f.attr("eid");if(e===a){f.remove();}});},storeSlctVal:function(h,a){var b=h,d=a,c,g,e="",f="";$("p",b).each(function(){var i=$(this);selectedId=i.attr("eid");c=i.attr("ename");g=c.replace(/\-/,"'");f+=selectedId+"/";e+=g+"/";});$(".tls_slctId").eq(d).val(f);$(".tls_slctName").eq(d).val(e);},TriggerSameSlct:function(){$("select").change(function(){var c=$(this);if(c.attr("data-group")===undefined){return;}var a=c.attr("data-group"),b=$("option:selected",c).text();$("select").each(function(){var e=$(this),d=e.attr("data-group");if(a===d){$("option",e).each(function(){var f=$(this),g=f.text();if(b===g){f.prop("selected","selected");}});}});});},blurHiddenIpt:function(a){$(a).click(function(){$(this).blur();});},tree:function(){$(".org_level>ul>li:first").addClass("first_pare");$(".org_level li:last").addClass("last_child");$(".org_level").on("click",".expColIco",function(){var b=$(this),a=b.parent();if(!a.hasClass("last_child")){if(a.hasClass("collapse")){a.removeClass("collapse").next().show();}else{a.addClass("collapse").next().hide();}}});},fixHighchartForIE:function(g,d){var c,f,a=$(".img_loading").clone(),b=$("#api_prefix").val();$("#"+g).html(a);$.ajax({url:b+"/HighchartsExport/ImageUrl",type:"POST",contentType:"text/xml",data:d,success:function(h){$("#"+g).html("");$("<img>").attr("src",h.message).appendTo("#"+g);}});c="<div id='chart_tip' class='chart_tip'><p>Charts are rendered as picture due to IE8 security fix. For better experience, please use modern browser like IE9+.</p><button type='button' class='del binIco'><i></i></button></div>";if(fedPris.oldIE()&&$("#chart_tip").length===0){$(".pageWrapper").append(c);$("#chart_tip").stop().animate({top:0},800);}$(document).on("click",".del",function(){e();});function e(){f=$("#chart_tip").outerHeight();$("#chart_tip").stop().animate({top:"-"+f},800);}},renderStaffAtrackHour:function(){var g,l,k=[],a=[],m=[],h=[],n=$("#atrack_chart").attr("data-source-atrack"),j=new Date().getMonth(),c=new Date().getFullYear(),b=c+"-"+j+"-1",e=new Date().convertDate(b).format("MMM, yyyy");l={chart:{renderTo:"atrack_chart",type:"column",width:888,inverted:true,reflow:false,marginTop:70,borderRadius:0,events:{load:function(o){d();k=[];a=[];h=[];}}},title:{text:"Atrack Hours (h)"},subtitle:{text:e,y:35,style:{color:"#999",fontWeight:"bold",fontSize:"14px"}},credits:{enabled:false},colors:prisGCfg.chartColor,legend:{margin:20,borderColor:"#fff"},xAxis:{labels:{useHTML:true}},yAxis:{title:null,max:192,tickPixelInterval:48,plotLines:[{color:"#e2792c",width:1,zIndex:10,dashStyle:"ShortDash",label:{rotation:0}},{color:"#58b146",width:1,value:176,zIndex:10,dashStyle:"ShortDash",label:{text:"TotalHours: 176",rotation:0}}]},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:true,color:"white",formatter:function(){if(this.y!==0){return this.y;}}}}},series:[{}],exporting:{enabled:false}};i(n);function i(o){$.getJSON(o,function(s){var q,p=s.currentHour;$.each(s.people,function(w,x){var v=x.name,u=x.leader,t=x.eid;if(u==="yes"){h.push(w);}a.push(v);m.push(t);});k=s.hour;q=s.people.length*70;l.chart.height=q;l.xAxis.categories=a;l.series=k;l.yAxis.plotLines[0].value=p;l.yAxis.plotLines[0].label.text="Current Hours "+p;g=new Highcharts.Chart(l);if(fedPris.oldIE()){var r=g.getSVG();fedPris.fixHighchartForIE(l.chart.renderTo,r);}f();});}function d(){var r=h,o,s=$(".atrack_chart .highcharts-axis-labels span");for(var q=0;q<r.length;q++){o=r[q];$clickSpan=s.eq(o);if(!$clickSpan.hasClass(".leader")){$clickSpan.addClass("leader").prepend($("<b>+</b>"));}}for(var p=0;p<m.length;p++){$clickSpan=s.eq(p);$clickSpan.attr("eid",m[p]);}}function f(){$("#atrack_chart .leader").click(function(){var q=g.series.length,p=$(this).attr("eid").replace(/^[A-Za-z]/gi,""),o=$("#atrack_chart").attr("data-souce-getPerson")+"?eid="+p;m=[];g.series[0].remove();i(o);$("#chartBack_btn").show();});}$("#chartBack_btn").click(function(){m=[];i(n);$("#chartBack_btn").hide();});},homePage:function(){this.toTop();this.feedback();this.navHover();fedLib.switchable({container:".switchable",content:".contentBox",trigger:".triggerBox",effect:"scrollx",pageButton:[".btnPrev",".btnNext"],interval:5000,autoPlay:true});this.projStatus();this.renderSourceToFullCal("#mod_l_calendar","http://hzmis/Proxy/api/sp_calendar?site=gihz&title=gi-calendar","giActivity");this.tree();this.renderNewsToIdx("#gihz");},billing:function(){this.toTop();this.feedback();this.showTip();this.navHover();this.titleTips();this.tdEvenOdd();this.inputTips();this.selectAll();this.fixedTable();this.prisTab("#report");this.showCustomize();this.rejTextarea();this.datePicker();this.rangeSelect();this.titleTips(".name_id");this.print();this.TriggerSameSlct();},profile:function(){this.toTop();this.feedback();this.navHover();this.inputTips();this.titleTips();this.tdEvenOdd();this.modShowHide();this.datePicker();this.uploadingImg();this.prisTab("#it_skil .toggle_con");this.prisTab("#edit_proj");this.print();this.changeTitStatus();this.sortTable("#pop_win_tls table");this.selectTL("#pop_win_tls");},staff:function(){this.toTop();this.feedback();this.navHover();this.tdEvenOdd();this.titleTips();this.sortTable("#staff_table");this.staffTableClass("#staff_table");this.editSlctProj();this.renderStaffAtrackHour();},project:function(){this.toTop();this.feedback();this.navHover();this.tdEvenOdd();this.showTip();this.titleTips();this.addHeadc();},meetingRoom:function(){this.toTop();this.feedback();this.navHover();this.titleTips();this.titleTips(".ui-selectee");this.datePicker();this.setDaultRoom();this.prisTab("#meet_room");this.meetRoomScrol();this.meetRoomChosDate();this.blurHiddenIpt("#meet_room .date_month_meeting");},bpoAis:function(){this.toTop();this.feedback();this.navHover();this.prisTab("#report");this.prisTab(".tab_in_tab");}};