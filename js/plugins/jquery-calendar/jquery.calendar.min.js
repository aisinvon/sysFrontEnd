(function(g){var m="cal";var d="1.1.0";var h="month";var l="week";var j=g("#cur_eid").val();var e=parseInt(g("#cur_date").val().replace(/-/g,""))-1;var f={startdate:null,daystodisplay:null,startmonth:null,startyear:null,monthstodisplay:null,defaultcolor:"#ffd144",invalidcolor:"#888888",maskmonthlabel:"l",maskeventlabel:"g:i",maskeventlabeldelimiter:"",maskeventlabelend:"",maskdatelabel:"D, jS",masktimelabel:{"00":"g:i <\\sp\\a\\n>A</\\sp\\a\\n>",noon:"\\N\\O\\O\\N"},resources:false,minwidth:130,minheight:null,overlapoffset:15,daytimestart:"00:00:00",daytimeend:"24:00:00",weekstart:1,dragincrement:"15 mins",gridincrement:"15 mins",creationsize:"15 mins",allowcreation:"both",allowmove:false,allowresize:false,allowselect:false,allowremove:false,allowoverlap:false,allownotesedit:false,allowhtml:false,easing:{eventupdate:"linear",eventremove:"linear",eventeditin:"linear",eventeditout:"linear",datechange:"linear"},eventcreate:g.noop,eventnotesedit:g.noop,eventremove:g.noop,eventselect:g.noop,eventmove:g.noop,eventresize:g.noop,dayclick:g.noop,daydblclick:g.noop,onload:g.noop};var n={prevent:function(o){o.preventDefault();},scrollbarSize:function(){if(!n._scrollbarSize){var p=g(document.body),o=p.css({overflow:"hidden"}).width();o-=p.css({overflow:"scroll"}).width();if(!o){o=p.width()-p[0].clientWidth;}p.css({overflow:""});n._scrollbarSize=o;}return n._scrollbarSize;},_scrollbarSize:false,selectrange:function(p,o){return this.each(function(){if(this.setSelectionRange){this.focus();this.setSelectionRange(p,o);}else{if(this.createTextRange){var q=this.createTextRange();q.collapse(true);q.moveEnd("character",o);q.moveStart("character",p);q.select();}}});},onscroll:function(s){var r=g(this),q=r.parent(".ui-"+m+"-container"),t=r.scrollLeft(),p=r.scrollTop(),o=q.data(m);if(o){q.find(".ui-"+m+"-timeline").scrollTop(p);q.find(".ui-"+m+"-dateline").scrollLeft(t);q.find(".ui-"+m+"-resourceline").scrollLeft(t);}},between:function(p,r,o){if(p instanceof Date){var q=p.getTime();return(q>=r.getTime()&&q<=o.getTime());}else{if(!isNaN(Number(p))){return(p>=r&&p<=o);}}return false;},inrange:function(p,q,r,o){return !(q.getTime()<r.getTime()||p.getTime()>o.getTime());},resource:function(o,r){var q=0;if(r.settings.resources!==false){for(var p in r.settings.resources){if(r.settings.resources.hasOwnProperty(p)){if(q==o){return{id:p,name:r.settings.resources[p]};}q++;}}}return{id:null,name:null};},resourceIndex:function(r,q){var o=0;if(q.settings.resources!==false){if(g.isArray(q.settings.resources)){for(var p in q.settings.resources){if(q.settings.resources[p]==r){return o;}o++;}}else{for(var p in q.settings.resources){if(q.settings.resources.hasOwnProperty(p)){if(p==r){return o;}o++;}}}}return false;},repetitions:function(q,o){var p=[];console.log("Parsing repetitions: ",arguments);if("freq" in o.rules){switch(o.rules.freq){case"daily":case"weekly":case"yearly":break;}}return p;},overlaps:function(p,s,q){var w=g(this),u=w.data(m),o=[];if(u){var x=u.cache.events;for(var v in x){if(x.hasOwnProperty(v)&&(x[v].begins<s&&x[v].ends>p&&x[v].resource===q)){x[v].overlap={partial:true,inset:0,count:0,items:{},uid:v};o.push(x[v]);}}if(o.length>1){o.sort(function(z,y){return z.begins.getTime()-y.begins.getTime();});for(var t in o){if(o.hasOwnProperty(t)){for(var r in o){if(t===r){continue;}if(o.hasOwnProperty(r)&&!(o[t].overlap.uid in o[r].overlap.items)&&!(o[r].overlap.uid in o[t].overlap.items)&&(o[t].begins<o[r].ends&&o[t].ends>o[r].begins&&o[t].resource===o[r].resource)){o[t].overlap.items[o[r].overlap.uid]=o[r];o[r].overlap.items[o[t].overlap.uid]=o[t];o[t].overlap.count++;o[r].overlap.count++;if(o[t].begins.getTime()==o[r].begins.getTime()){o[t].overlap.partial=false;o[r].overlap.partial=false;o[r].overlap.inset=o[t].overlap.inset+1;}else{if(o[t].begins.getTime()<o[r].begins.getTime()){if(o[t].overlap.partial){o[r].overlap.inset++;}}else{if(o[r].overlap.partial){o[t].overlap.inset++;}}}u.cache.events[o[t].overlap.uid]=o[t];u.cache.events[o[r].overlap.uid]=o[r];}}}}}w.data(m,u);}},errors:{eventParse:function(q,p){var o=new Error(q);o.type="EventParse";o.event=p;return o;},icsParse:function(q,o,r){var p=new Error(q);p.type="ICSParse";p.line=o;p.value=r;return p;}},parse:{_icalendar:{folds:/^\s(.*)$/,entry:/^([A-Za-z0-9-]+)((?:;[A-Za-z0-9-]+=(?:"[^"]+"|[^";:,]+)(?:,(?:"[^"]+"|[^";:,]+))*)*):(.*)$/,param:/;([A-Za-z0-9-]+)=((?:"[^"]+"|[^";:,]+)(?:,(?:"[^"]+"|[^";:,]+))*)/g,value:/,?("[^"]+"|[^";:,]+)/g,date:/^(\d{4})(\d\d)(\d\d)$/,time:/^(\d{4})(\d\d)(\d\d)T(\d\d)(\d\d)(\d\d)(Z?)$/,range:/^(\d{4})(\d\d)(\d\d)T(\d\d)(\d\d)(\d\d)(Z?)\/(\d{4})(\d\d)(\d\d)T(\d\d)(\d\d)(\d\d)(Z?)$/,offset:/^([+-])(\d\d)(\d\d)$/,duration:/^([+-])?P(\d+W)?(\d+D)?(T)?(\d+H)?(\d+M)?(\d+S)?$/,_rrule:function(r){var q=r.split(";"),p,s={};for(var o in q){p=q[o].split("=");s[p[0].toLowerCase()]=p[1].toLowerCase();}return s;}},icalendar:function(r){var q=n.errors.icsParse,p=n.parse._icalendar,v="cal_begin",w=[],x=r.replace(/\r\n/g,"\n").split("\n"),o=null,t=null;for(var s=x.length-1;s>0;s--){var u=p.folds.exec(x[s]);if(u){x[s-1]+=u[1];x[s]="";}}g.each(x,function(z,y){if(!y){return;}switch(v){case"cal_begin":if(y.indexOf("BEGIN:VCALENDAR")==-1){throw new q("Expecting BEGIN:VCALENDAR but found '"+y+"' instead.",z,y);}t={events:[]};v="cal_info";break;case"cal_info":if(y.indexOf("BEGIN:VEVENT")==0){o={repeat:[],except:[]};v="cal_event";}if(y.indexOf("END:VCALENDAR")==0){w.push(t);v="done";}if(v!=="cal_info"){return;}break;case"cal_event":if(y.indexOf("END:VEVENT")==0){t.events.push(o);v="cal_info";}if(v!=="cal_event"){return;}var A=p.entry.exec(y);if(!A){throw new q("Missing entry name.",z,y);}switch(A[1].toLowerCase()){case"uid":o.uid=A[3];break;case"meetingRoomId":o.meetingRoomId=A[3];break;case"dtstart":o.begins=g[m].date(A[3]);break;case"dtend":o.ends=g[m].date(A[3]);break;case"summary":o.notes=A[3];break;case"rrule":o.repeats=p._rrule(A[3]);break;case"exrule":o.excepts=p._rrule(A[3]);break;case"rdate":o.repeat.push(g[m].date(A[3]));break;case"exdate":o.except.push(g[m].date(A[3]));break;}break;}});if(v!=="done"){throw new q("Unexpected end of file. Expecting END:VCALENDAR.",x.length,"");}return w.length>0?w.pop():false;}},event:{calculateElementCount:function(o){return Math.ceil(o.cache.begins.getDaysBetween(o.cache.ends,true))+1;},update:function(p,q,r){var o=g(this),w=o.data(m),s=w&&w.calendar?w.calendar.data(m):false;if(s&&w){var t=w.elems;if("begins" in p){w.begins=g[m].date(p.begins);}if("ends" in p){w.ends=g[m].date(p.ends);}if("color" in p){w.colors=p.color?g[m].colors.generate(p.color):s.settings.defaultcolor;}if("title" in p){w.title=p.title||null;}if("notes" in p){w.notes=p.notes||"";}if(w.ends<s.settings.startdate||w.begins>s.cache.enddate){return false;}w.cache.ends=(s.cache.enddate<w.ends?s.cache.enddate.addSeconds(-1):w.ends);w.cache.begins=(s.settings.startdate>w.begins?s.settings.startdate.copy():w.begins);var v=s.settings.allowhtml?"html":"text";t.find("pre.details")[v](w.notes);var u=w.begins.format(s.settings.maskeventlabel)+"-"+w.ends.format(s.settings.maskeventlabel);o.find("p.title")[v](u);o.attr("title","<strong>Requester: </strong><br />"+w.title+"<br /><strong>Meeting Subject: </strong><br />"+w.notes);t.data(m,w);s.cache.events[w.uid]=w;w.calendar.data(m,s);n.draw[s.type].position.apply(t,[q,r]);return true;}return false;},edit:function(u){var o=u&&!g(this).is("div.ui-"+m+"-event")?g(this).parents("div.ui-"+m+"-event"):g(this),x=o.data(m),r=x&&x.calendar?x.calendar.data(m):false;if(r&&x){if(!r.settings.allownotesedit){return;}var t=o.find("pre.details"),q=t.height();var w=r.settings.allowhtml?"html":"text";var s=g('<textarea class="details" />')[w](x.notes||"").css({boxShadow:"inset 0px 0px 6px "+x.colors.mainShadow}).on("mousedown."+m,function(y){y.stopPropagation();}).appendTo(o);if(o.height()<=30){var v=o.height()<=15?4:1,p=o.height()<=15?-1:0;o.unbind("dblclick."+m).stop(true,true);s.css({marginTop:p,left:v,right:v,height:q,border:"1px solid "+x.colors.mainSelected,borderTop:"none",borderTopLeftRadius:0,borderTopRightRadius:0,opacity:0,overflow:"hidden",zIndex:1}).animate({height:45,opacity:1},"fast",r.settings.easing.eventeditin,function(){g(this).css("overflow","scroll");t.detach();n.selectrange.apply(s,[x.notes.length||0,x.notes.length||0]);});}else{t.detach();n.selectrange.apply(s,[x.notes.length||0,x.notes.length||0]);}s.blur(function(){var y=x.notes!=g(this).val(),z=x.elems;x.notes=g(this).val();z.attr("title",x.notes||"");if(o.height()<=30){g(this).css("overflow","hidden");g(this).animate({height:q,opacity:0},125,r.settings.easing.eventeditout,function(){g(this).remove();});}else{g(this).remove();}z.append(t[w](x.notes||""));o.bind("dblclick."+m,n.event.edit);if(y){z.data(m,x);r.cache.events[x.uid]=x;x.calendar.data(m,r);r.settings.eventnotesedit.apply(x.calendar,[x.uid,x,z]);}});}if(u){u.preventDefault();u.stopPropagation();}},select:function(p,q){var o=g(this),v=o.data(m),r=v&&v.calendar?v.calendar.data(m):false;if(r&&v){if(!r.settings.allowselect){return;}if(p===undefined){p="fast";}var t=v.calendar.find("div.ui-"+m+"-event.selected"),u=t.data(m);if(u&&(u.uid===v.uid)){return;}var w=r.settings.eventselect.apply(v.calendar,[v.uid,v,o]);if(w===undefined||w){var s=v.elems;t.removeClass("selected");s.addClass("selected");n.draw[r.type].position.apply(s,[p,q]);n.draw[r.type].position.apply(t,[p,q]);}}},remove:function(x,p,r){var o=x?g(this).closest("div.ui-"+m+"-event"):g(this),B=o.data(m),s=B&&B.calendar?B.calendar.data(m):false;if(s&&B){if(p===undefined){p="fast";}if(!r){r=s.settings.easing.eventremove;}var u=B.elems,C=s.settings.eventremove.apply(B.calendar,[B.uid,B,u,x]),z=function(){g(this).remove();};if(C===undefined||C){var q={width:0,height:0,fontSize:"0em",opacity:0.1};delete s.cache.events[B.uid];B.calendar.data(m,s);switch(u.length){case 1:q.left="+="+(o.width()/2);q.top="+="+(o.height()/2);o.animate(q,p,r,z);break;case 2:var v=u.eq(0),t=u.eq(1),y=g.extend({},q),w=g.extend({},q);y.left="+="+(u.eq(0).width());y.top=s.cache.dayHeight;w.top=0;v.delay(375).animate(y,p,r,z);t.animate(w,p,r,z);break;default:var A=0;u.each(function(){A+=g(this).width();});q.left=o.position().left+s.elements.container.scrollLeft()+(A/2);q.top=s.cache.dayHeight/2;u.first().delay(375).animate(q,p,r,z);u.filter(":not(:first)").animate(q,p,r,z);break;}}}if(x){x.preventDefault();x.stopPropagation();}}},drag:{start:function(u){var o=g(this),r=u&&!o.is("div.ui-"+m+"-event")?o.parents("div.ui-"+m+"-event"):o,q=null,p=r.data(m),t=p&&p.calendar?p.calendar.data(m):false;if(t&&p){var s={event:r,data:t,values:p,i:"cal_"+(new Date()).getTime(),type:"resize"};n.drag[s.i]={started:false,startX:u.pageX,startY:u.pageY,lastX:u.pageX,lastY:u.pageY,deltaX:0,deltaY:0,incX:0,incY:0,obTime:p.begins.copy(),oeTime:p.ends.copy(),bTime:p.begins.roundToIncrement(t.settings.dragincrement),eTime:p.ends.roundToIncrement(t.settings.dragincrement)};r.stop(true,true);switch(true){case o.is(".ui-"+m+"-event"):s.lockBegins=Number(t.settings.startdate.format("Ymd"));s.lockEnds=Number(t.cache.enddate.format("Ymd"));s.lockDayBegins=Number(t.settings.daytimestart.replace(/[^0-9]/g,""));s.lockDayEnds=Number(t.settings.daytimeend.replace(/[^0-9]/g,""));s.type="move";g(document).bind("mousemove."+m,s,n.drag.move);break;case o.is(".resize-top"):s.lockDate=p.begins.format("Y-m-d");g(document).bind("mousemove."+m,s,n.drag.resizeB);break;case o.is(".resize-bottom"):s.lockDate=p.ends.format("Y-m-d");g(document).bind("mousemove."+m,s,n.drag.resizeE);break;default:delete n.drag[s.i];return true;}g(document).bind("mouseup."+m,s,n.drag.end);u.stopPropagation();}},resizeB:function(u){var p=u.data.event,r=u.data.data,w=u.data.values,s=n.drag[u.data.i];s.deltaY=s.lastY-u.pageY;s.lastY=u.pageY;s.incY+=s.deltaY;if(s.deltaY==0){return true;}if(!s.started&&(s.incY>5||s.incY<-5)){s.started=true;p.addClass("ui-dragging ui-resizing");}else{if(s.started){var o=Math.round(s.incY/r.cache.dragHeight);if(o===0){return true;}var v=s.bTime.incrementBy(r.settings.dragincrement,0-o);var q=v.format("Y-m-d");var t=v.format("H:i:s");if(q===u.data.lockDate||t!==r.settings.daytimestart){if(q!==u.data.lockDate){v=g[m].date(u.data.lockDate+" "+r.settings.daytimestart);o=Math.round(v.getIncrementBetween(w.begins,r.settings.dragincrement));}if(v>=w.ends){o=Math.round(w.ends.getIncrementBetween(w.begins,r.settings.dragincrement));v=w.ends.incrementBy(r.settings.dragincrement,-1).copy();g(document).unbind("mousemove."+m).bind("mousemove."+m,u.data,n.drag.resizeE);}s.incY-=(o*r.cache.dragHeight);w.begins=s.bTime=v;w.cache.begins=(r.settings.startdate>w.begins?r.settings.startdate.copy():w.begins);p.data(m,w);r.cache.events[w.uid]=w;w.calendar.data(m,r);n.draw[r.type].position.apply(w.elems);}}}},resizeE:function(u){var p=u.data.event,r=u.data.data,w=u.data.values,s=n.drag[u.data.i];s.deltaY=s.lastY-u.pageY;s.lastY=u.pageY;s.incY+=s.deltaY;if(s.deltaY==0){return true;}if(!s.started&&(s.incY>5||s.incY<-5)){s.started=true;p.addClass("ui-dragging ui-resizing");}else{if(s.started){var o=Math.round(s.incY/r.cache.dragHeight);if(o===0){return true;}var v=s.eTime.incrementBy(r.settings.dragincrement,0-o);var q=v.format("Y-m-d");var t=v.format("H:i:s");if(q===u.data.lockDate||t!==r.settings.daytimeend){if(q!==u.data.lockDate){v=g[m].date(u.data.lockDate+" "+r.settings.daytimeend);o=Math.round(v.getIncrementBetween(w.ends,r.settings.dragincrement));}if(v<=w.begins){o=Math.round(w.begins.getIncrementBetween(w.ends,r.settings.dragincrement));v=w.begins.incrementBy(r.settings.dragincrement,1).copy();g(document).unbind("mousemove."+m).bind("mousemove."+m,u.data,n.drag.resizeB);}s.incY-=(o*r.cache.dragHeight);w.ends=s.eTime=v;w.cache.ends=(r.cache.enddate<v?r.cache.enddate.addSeconds(-1):v);p.data(m,w);r.cache.events[w.uid]=w;w.calendar.data(m,r);n.draw[r.type].position.apply(w.elems);}}}},move:function(u){var q=u.data.event,s=u.data.data,v=u.data.values,t=n.drag[u.data.i];t.deltaX=t.lastX-u.pageX;t.lastX=u.pageX;t.incX+=t.deltaX;t.deltaY=t.lastY-u.pageY;t.lastY=u.pageY;t.incY+=t.deltaY;if(!t.started&&(t.incY>5||t.incY<-5||t.incX>5||t.incY<-5)){t.started=true;q.addClass("ui-dragging");}else{if(t.started){switch(s.type){case l:var o=Math.round(t.incY/s.cache.dragHeight);var r=Math.round(t.incX/s.cache.dayWidth);if(o===0&&r===0){return true;}var p=t.bTime.addDays(0-r).incrementBy(s.settings.dragincrement,0-o);var w=t.eTime.addDays(0-r).incrementBy(s.settings.dragincrement,0-o);t.incY-=(o*s.cache.dragHeight);t.incX-=(r*s.cache.dayWidth);v.begins=t.bTime=p;v.ends=t.eTime=w;v.cache.ends=(s.cache.enddate<w?s.cache.enddate.addSeconds(-1):w);v.cache.begins=(s.settings.startdate>v.begins?s.settings.startdate.copy():v.begins);q.data(m,v);s.cache.events[v.uid]=v;v.calendar.data(m,s);n.draw[s.type].position.apply(v.elems);break;case h:q.css({left:"-="+t.deltaX,top:"-="+t.deltaY});break;}}}},end:function(r){var p=r.data.event,q=r.data.data,o=r.data.values;switch(r.data.type){case"resize":q.settings.eventresize.apply(o.calendar,[o.uid,o,p]);break;case"move":q.settings.eventmove.apply(o.calendar,[o.uid,o,p]);break;}g(document).unbind("mousemove."+m).unbind("mouseup."+m);p.removeClass("ui-dragging ui-resizing");delete n.drag[r.data.i];n.draw[q.type].position.apply(o.elems);}},draw:{week:{cal:function(w){var D,C,E,y,v,x,B,q,u=g[m].date().format("Y-m-d");w.elements.timeblock.css({width:"100%",height:w.cache.incrementHeight});w.elements.timelabel.css({width:"100%",height:w.cache.incrementHeight});for(var t=0,A,p;t<w.cache.incrementsInDay;t++){E=w.settings.startdate.incrementBy(w.settings.gridincrement,t);p=E.format("H:i:s");A=E.format("i");D=w.elements.timeblock.clone(true);D.attr("time",p);D.attr("title",p);D.attr("past",A);x=w.elements.timelabel.clone(true);x.attr("time",p);x.attr("past",A);if(p=="12:00:00"&&"noon" in w.settings.masktimelabel){x.find("p:first").html(E.format(w.settings.masktimelabel.noon));}else{if(A in w.settings.masktimelabel){x.find("p:first").html(E.format(w.settings.masktimelabel[A]));}}w.elements.dayblock.append(D);w.elements.timeline.append(x);}w.elements.dayblock.find("div.ui-"+m+"-time:first").css("border-top","0");w.elements.timeline.find("div.ui-"+m+"-label-time:first").html("");w.elements.dayblock.css({width:w.cache.resourceWidth,height:w.cache.dayHeight});w.elements.resourcelabel.css({width:w.cache.resourceWidth,height:"100%"});w.elements.datelabel.css({width:w.cache.dayWidth,height:"100%"});for(var t=0;t<w.settings.daystodisplay;t++){y=w.settings.startdate.addDays(t);q=y.format("Y-m-d");for(var o=0;o<w.cache.resourcecount;o++){C=w.elements.dayblock.clone(true).css("left",(w.cache.dayWidth*t)+(w.cache.resourceWidth*o)).attr({date:q,day:y.getDay(),resource:n.resource.apply(this,[o,w]).id});if(o<(w.cache.resourcecount-1)){C.addClass("ui-"+m+"-resource");}if(q===u){C.addClass("ui-"+m+"-today");}w.elements.container.append(C);if(w.settings.resources){v=w.elements.resourcelabel.clone(true).css("left",(w.cache.dayWidth*t)+(w.cache.resourceWidth*o)).attr({date:q,day:y.getDay(),resource:n.resource.apply(this,[o,w]).id}).find("p").html(n.resource.apply(this,[o,w]).name).end();w.elements.resourceline.append(v);}}B=w.elements.datelabel.clone(true).css("left",w.cache.dayWidth*t).attr({date:q,day:y.getDay()}).find("p").html(y.format(w.settings.maskdatelabel)).end();if(q===u){B.addClass("ui-"+m+"-today");}w.elements.dateline.append(B);}w.elements.dateline.add(w.elements.resourceline).css({right:w.cache.scrollbarSize});var z=g(this);z.append(w.elements.timeline).append(w.elements.dateline).append(w.elements.datelinefill).append(w.elements.container).append(g("<div class='meet_cale_in_mask none'></div>"));if(g.isArray(w.settings.resources)||typeof w.settings.resources=="object"){z.append(w.elements.resourceline).append(w.elements.resourcelinefill);}var s=(w.cache.dayHeight/2)-(w.elements.container.height()/2);w.elements.container.scrollTop(s);},event:function(q,w){w.cache.ends=(q.cache.enddate<w.ends?q.cache.enddate.addSeconds(-1):w.ends);w.cache.begins=(q.settings.startdate>w.begins?q.settings.startdate.copy():w.begins);var t=n.event.calculateElementCount.apply(this,[w]),o,r;if(!("elems" in w)||w.elems.length<1){o=k.event.clone(true);var u=parseInt(w.begins.format("Y-m-d").replace(/-/g,""));if(w.eid===j&&u>e){o.find("span.button-remove").show();}else{if(w.eid!==j){o.addClass("not_mine");}}if(!q.settings.allowresize){o.find("p.resize-top, p.resize-bottom").hide();}if(q.settings.allowmove){o.find("pre.details").bind("selectstart."+m,n.prevent);}else{o.unbind("mousedown."+m,n.drag.start);}var v=q.settings.allowhtml?"html":"text";o.attr("data-id",w.uid);o.find("pre.details")[v](w.title+"<br />"+w.notes);var s=w.begins.format(q.settings.maskeventlabel)+"-"+w.ends.format(q.settings.maskeventlabel),p="<a href='mailto:"+w.title+"'></a>";o.find("p.title")[v](s);o.attr("title","Requester: \n"+w.title+"\nMeeting Subject: \n"+w.notes).attr("meetingroomid",w.meetingRoomId);if(w.eid!==j){o.wrapInner(p);}r=o;}else{r=w.elems.detach();if(r.length>t){r.slice(0,t);}o=r.removeClass("begin end").addClass("mid").eq(0);}while(t>r.length){r=r.add(o.clone(true));}if(q.settings.startdate<=w.begins){r.first().removeClass("mid").addClass("begin");}if(q.cache.enddate>=w.ends){r.last().removeClass("mid").addClass("end");}q.elements.container.append(r);w.elems=r;r.data(m,w);n.draw[q.type].position.apply(r);},position:function(s,t,p){var r=g(this),o=r.data(m),q=o&&o.calendar?o.calendar.data(m):false,p=p===undefined?true:p;if(q&&o){r.each(function(y,v){var u=g(v),C=g[m].date(o.begins.addDays(y),q.settings.daytimestart),A=g[m].date(o.begins.addDays(y),q.settings.daytimeend);if(p){var w=o.overlap.items;n.overlaps.apply(o.calendar,[C,A,o.resource]);o=u.data(m);for(var B in o.overlap.items){n.draw[q.type].position.apply(o.overlap.items[B].elems,[false,false,false]);}for(var B in w){if(!(B in o.overlap.items)){n.draw[q.type].position.apply(w[B].elems,[false,false,true]);}}}var E={top:y>0?0:q.cache.incrementHeight*g[m].date(o.cache.begins,q.settings.daytimestart).getIncrementBetween(o.cache.begins,q.settings.gridincrement),left:q.cache.dayWidth*(q.settings.startdate.getDaysBetween(o.cache.begins,true)+y)+(q.cache.resourceWidth*o.resource),width:(o.resource!==null?q.cache.resourceWidth:q.cache.dayWidth)-1,height:Math.min(q.cache.dayHeight,q.cache.incrementHeight*(y<1?o.begins:C).getIncrementBetween((y==r.length-1?o.cache.ends:A),q.settings.gridincrement)),backgroundColor:u.hasClass("selected")?o.colors.mainSelected:o.colors.mainBackground,color:o.colors.mainText};E.width-=q.settings.overlapoffset*o.overlap.count;E.left+=q.settings.overlapoffset*o.overlap.inset;var x={backgroundColor:o.colors.detailsBackground,color:o.colors.detailsText};if(E.height<=15){x.display="none";u.attr("title",o.notes||"").unbind("dblclick."+m).bind("dblclick."+m,n.event.edit);}else{x.display="block";u.removeAttr("title").unbind("dblclick."+m);}var D=q.settings.allowhtml?"html":"text";if(!o.title){var z=o.begins.format(q.settings.maskeventlabel)+"-"+o.ends.format(q.settings.maskeventlabel);}u.find("p.title")[D](z).attr("data-time-s",o.begins.format(q.settings.maskeventlabel)).attr("data-time-e",o.ends.format(q.settings.maskeventlabel));u.attr("title","Requester: \n"+o.title+"\nMeeting Subject: \n"+o.notes).attr("meetingroomid",o.meetingRoomId);if(!s){u.css(E);u.find("pre.details").css(x);}else{u.stop(true,false).animate(E,s,t||q.settings.easing.eventupdate).find("pre.details").stop(true,false).animate(x,s,t||q.settings.easing.eventupdate).css("display",x.display);if(jQuery.ui===undefined){u.css({backgroundColor:E.backgroundColor,textShadow:E.textShadow,color:E.color});u.find("pre.details").css({backgroundColor:x.backgroundColor,textShadow:x.textShadow,color:x.color});}}});}}},month:{cal:function(p){var s,x,w,t,o,r=g[m].date().format("Y-m-d");p.elements.datelabel.css({width:p.cache.dayWidth,height:"100%"});p.elements.dayblock.css({width:p.cache.dayWidth,height:p.cache.dayHeight});for(var q=0;q<p.settings.daystodraw;q++){t=p.settings.startdate.addDays(q);o=t.format("Y-m-d");var v=p.settings.allowhtml?"html":"text";var x=p.elements.dayblock.clone(true).attr({date:o,day:t.getDay()}).css({left:p.cache.dayWidth*(q%7),top:p.cache.dayHeight*Math.floor(q/7)}).toggleClass("non-month",t.getMonth()+1!=p.settings.startmonth).find("p")[v](t.getDate()).end();if(o===r){x.addClass("ui-"+m+"-today");}if(q<7){w=p.elements.datelabel.clone(true).attr({date:o,day:t.getDay()}).css("left",p.cache.dayWidth*q).find("p").html(t.format(p.settings.maskmonthlabel)).end();p.elements.dateline.append(w);}p.elements.container.append(x);}var u=g(this);u.append(p.elements.dateline).append(p.elements.container);},event:function(t,q){q.cache.ends=(t.cache.enddate<q.ends?t.cache.enddate.addSeconds(-1):q.ends);q.cache.begins=(t.settings.startdate>q.begins?t.settings.startdate.copy():q.begins);q.cache.repetitions=n.repetitions.apply(this,[t,q]);var p=n.event.calculateElementCount.apply(this,[q]),r,s;if(!("elems" in q)||q.elems.length<1){r=k.event.clone(true);if(!t.settings.allowremove){r.find("span.button-remove").hide();}if(!t.settings.allowmove){r.unbind("mousedown."+m,n.drag.start);}r.find("p.resize-top, p.resize-bottom").hide();r.attr("data-id",q.uid);var o=t.settings.allowhtml?"html":"text";r.find("pre.details").text(q.notes);r.find("p.title")[o]("● "+(q.title||(q.begins.format(t.settings.maskeventlabel)+(t.settings.maskeventlabelend!==""?t.settings.maskeventlabeldelimiter+q.ends.format(t.settings.maskeventlabelend):""))));r.attr("title",q.notes||"").unbind("dblclick."+m).bind("dblclick."+m,n.event.edit);s=r;}else{s=q.elems.detach();if(s.length>p){s.slice(0,p);}r=s.removeClass("begin end").addClass("mid").eq(0);}while(p>s.length){s=s.add(r.clone(true));}if(t.settings.startdate<=q.begins){s.first().removeClass("mid").addClass("begin");}if(t.cache.enddate>=q.ends){s.last().removeClass("mid").addClass("end");}t.elements.container.append(s);q.elems=s;s.data(m,q);n.draw[t.type].position.apply(s);},position:function(s,t,p){var r=g(this),o=r.data(m),q=o&&o.calendar?o.calendar.data(m):false,p=p===undefined?true:p;if(q&&o){r.each(function(x,A){var w=24*60*60*1000;var B=Math.floor(Math.abs(q.settings.startdate.getTime()-o.begins.getTime())/(w))+1;var v=g(A),z=v.hasClass("selected"),y=r.length>1;var u={top:q.cache.dayHeight*Math.floor((B-1)/7)+2+18,left:(q.cache.dayWidth*((B-1)%7))+(x>0?0:2),width:q.cache.dayWidth-(y&&x==0?2:4),height:q.cache.incrementHeight,backgroundColor:z?o.colors.mainSelected:"transparent",textShadow:z?o.colors.mainTextShadow+" 1px 1px 1px":"none",color:z?o.colors.mainText:o.colors.mainBackground};v.attr("title",o.notes||"");if(z){if(A.style.removeAttribute){A.style.removeAttribute("background-image");}else{A.style.removeProperty("background-image");}v.find("span.button-remove").show();if(y&&x==0){v.find("span.button-remove").hide();}if(x>0){v.find("p.title").hide();}}else{A.style.backgroundImage="none";v.find("span.button-remove").hide();if(x>0){v.find("p.title").show();}}if(!s){v.css(u).find("pre.details").hide();}else{v.stop(true,false).animate(u,s,t||q.settings.easing.eventupdate).find("pre.details").hide();if(jQuery.ui===undefined){v.css({backgroundColor:u.backgroundColor,textShadow:u.textShadow,color:u.color});}}});}}}}};var k={event:g(['<div data-title="no_tit_tip" class="ui-'+m+'-event mid">','<p class="resize-top" />','<p class="title" />','<span title="remove" class="button-remove none" />','<pre class="details" />','<p class="footer" />','<p class="resize-bottom" />',"</div>"].join("")).bind("selectstart."+m,n.prevent).bind("mousedown."+m,n.event.select).bind("mousedown."+m,n.drag.start).find("p.resize-top, p.resize-bottom").bind("mousedown."+m,n.drag.start).end().find("pre.details").bind("dblclick."+m,n.event.edit).end().find("p").bind("selectstart."+m,n.prevent).end().find("span.button-remove").bind("click."+m,n.event.remove).end(),day:g('<div class="ui-'+m+'-date" date="" day="" />').bind("selectstart."+m,n.prevent),time:g('<div class="ui-'+m+'-time" title="" time="" past="" />'),labels:{time:g('<div class="ui-'+m+'-label-time" time="" past="" ><p /></div>'),date:g('<div class="ui-'+m+'-label-date" date=""><p /><div class="delimiter" /></div>'),resource:g('<div class="ui-'+m+'-label-resource" date=""><p /><div class="delimiter" /></div>')},timeline:g('<div class="ui-'+m+'-timeline" />').bind("selectstart."+m,n.prevent),dateline:g('<div class="ui-'+m+'-dateline" />').bind("selectstart."+m,n.prevent),datelinefill:g('<div class="ui-'+m+'-dateline-fill" />'),resourceline:g('<div class="ui-'+m+'-resourceline" />'),resourcelinefill:g('<div class="ui-'+m+'-resourceline-fill" />'),container:g('<div class="ui-'+m+'-wrapper" />').bind("scroll."+m,n.onscroll)};var c={init:function(o){return g(this).each(function(){var q=g.extend({},f);if(o){g.extend(q,o);}var v=g(this),r=v.data(m);if(!r){r={type:l,target:v,settings:q,elements:{},cache:{scrollbarSize:n.scrollbarSize(),enddate:undefined,incrementsInDay:undefined,incrementHeight:undefined,dragHeight:undefined,dayWidth:undefined,dayHeight:undefined,events:{},calendars:{}}};if(r.settings.startmonth===null&&r.settings.startyear===null&&r.settings.monthstodisplay===null){if(r.settings.startdate===null){r.settings.startdate=new Date();}if(r.settings.daystodisplay===null){r.settings.daystodisplay=7;}}else{if(r.settings.startmonth===null){r.settings.startmonth=(new Date()).getMonth()+1;}if(r.settings.startyear===null){r.settings.startyear=(new Date()).getFullYear();}if(r.settings.monthstodisplay===null){r.settings.monthstodisplay=1;}r.settings.startdate=g[m].date(r.settings.startyear+"-"+(Number(r.settings.startmonth)<10?"0":"")+Number(r.settings.startmonth)+"-01");r.cache.enddate=r.settings.startdate.addMonths(r.settings.monthstodisplay);r.settings.daystodisplay=r.settings.startdate.getDaysBetween(r.cache.enddate);r.type=h;}r.settings.startdate=g[m].date(r.settings.startdate,r.settings.daytimestart);r.settings.defaultcolor=g[m].colors.generate(r.settings.defaultcolor);r.settings.invalidcolor=g[m].colors.generate(r.settings.invalidcolor);r.settings.minheight=Math.round(r.settings.minheight===null?g[m].incrementsIn(r.settings.gridincrement,"1 min"):r.settings.minheight);r.cache.enddate=r.settings.startdate.addDays(r.settings.daystodisplay);r.cache.incrementsInDay=r.settings.startdate.getIncrementBetween(g[m].date(r.settings.startdate,r.settings.daytimeend),r.settings.gridincrement);r.cache.incrementHeight=r.settings.minheight;r.cache.dragHeight=(r.cache.incrementHeight/g[m].incrementsIn(r.settings.gridincrement,r.settings.dragincrement));r.cache.resourcecount=1;v.addClass("ui-"+m+" ui-"+m+"-container ui-"+m+"-"+r.type);r.elements.dateline=k.dateline.clone(true);r.elements.container=k.container.clone(true);r.elements.dayblock=k.day.clone(true);r.elements.datelabel=k.labels.date.clone(true);r.elements.resourcelabel=k.labels.resource.clone(true);switch(r.type){case h:var s=r.settings.startdate.getDay();var p=r.cache.enddate.addDays(1).getDay();var u=r.settings.weekstart-1;var x=u==0?6:u-1;r.settings.startdate=r.settings.startdate.addDays((u>s?u-7:u)-s);r.cache.enddate=r.cache.enddate.addDays(x-p+2);r.settings.daystodraw=r.settings.startdate.getDaysBetween(r.cache.enddate);r.cache.weekstodraw=r.settings.startdate.getWeeksBetween(r.cache.enddate);r.elements.dayblock.append("<p/>");r.cache.monthWidth=v.outerWidth()/r.settings.monthstodisplay;r.cache.dayWidth=r.cache.monthWidth/7;r.cache.dayHeight=(v.outerHeight()-22)/r.cache.weekstodraw;n.draw.month.cal.apply(this,[r]);break;case l:if(g.isArray(r.settings.resources)||typeof r.settings.resources=="object"){r.cache.resourcecount=0;for(var t in r.settings.resources){if(r.settings.resources.hasOwnProperty(t)){r.cache.resourcecount++;}}v.addClass("ui-"+m+"-resources");r.elements.resourceline=k.resourceline.clone(true);r.elements.resourcelinefill=k.resourcelinefill.clone(true);}r.elements.datelinefill=k.datelinefill.clone(true);r.elements.timeline=k.timeline.clone(true);r.elements.timeblock=k.time.clone(true);r.elements.timelabel=k.labels.time.clone(true);var w=(v.outerWidth()-60)/(r.settings.daystodisplay*r.cache.resourcecount);r.cache.resourceWidth=r.settings.minwidth;r.cache.dayWidth=r.cache.resourceWidth*r.cache.resourcecount;r.cache.dayHeight=r.cache.incrementHeight*r.cache.incrementsInDay;n.draw.week.cal.apply(this,[r]);break;}v.data(m,r);if(!g.isArray(r.settings.calendars)){r.settings.calendars=[r.settings.events];}g(r.settings.calendars).each(function(){var A,y;if(g.isArray(this)){A=this;}else{if(typeof this=="string"){A=this;}else{if(g.isPlainObject(this)){A=this.events;y=this.color;}}}if(g.isArray(A)){for(var z=0;z<A.length;z++){if(!("color" in A[z])){A[z].color=y;}c.add.apply(v,[A[z]]);}}else{if(typeof A=="string"){g.ajax(A,{accepts:"text/calendar",dataType:"text",type:"get",crossDomain:true,data:{from:r.settings.datefrom,to:r.settings.dateto},success:function(B){var E=n.parse.icalendar.apply(v,[B]);console.log("Parsed: ",E);if(E&&"events" in E&&g.isArray(E.events)&&E.events.length>0){for(var C=0,D;C<E.events.length;C++){if(!("color" in E.events[C])){E.events[C].color=y;}c.add.apply(v,[E.events[C]]);}}}});}}});r.settings.calendars=undefined;r.settings.events=undefined;r.settings.onload.apply(v);}});},events:function(){var p=g(this),o=p.data(m);if(o){return o.cache.events;}return[];},event:function(o){var q=g(this),p=q.data(m);if(p&&o in p.cache.events){return p.cache.events[o];}return false;},add:function(t){var r=g(this),p=r.data(m);if(p){if(!"uid" in t){throw n.errors.eventParse("Missing unique id (uid)",t);}if(!"begins" in t){throw n.errors.eventParse("Missing start date/time (begins)",t);}if(!"ends" in t){throw n.errors.eventParse("Missing end date/time (ends)",t);}if(t.uid in p.cache.events){throw n.errors.eventParse("UID must be unique",t);}var q=g[m].date(t.begins),s=g[m].date(t.ends);var o={elems:g([]),calendar:r,uid:t.uid,begins:q,ends:s,resource:p.settings.resources&&t.resource?n.resourceIndex.apply(this,[t.resource,p]):null,colors:t.color?g[m].colors.generate(t.color):p.settings.defaultcolor,title:t.title||null,notes:t.notes||"",meetingRoomId:t.meetingRoomId||null,eid:t.eid||null,cache:{},overlap:{inset:[],depth:[]}};if(o.resource===false){throw n.errors.eventParse("Invalid resource id (resource)",t);}if(!(o.begins instanceof Date)){throw n.errors.eventParse("Invalid start date/time (begins)",t);}p.cache.events[o.uid]=o;r.data(m,p);if(n.inrange.apply(this,[q,s,p.settings.startdate,p.cache.enddate])){n.draw[p.type].event.apply(r,[p,o]);}}return r;},remove:function(p,r,t){var s=g(this),o,q=s.data(m);if(q&&p in q.cache.events){o=q.cache.events[p].elems;n.event.remove.apply(o,[null,r,t]);}return s;},clear:function(q,s){var r=g(this),o=null,p=r.data(m);if(q===undefined){q="fast";}if(!s){s=p.settings.easing.eventremove;}if(p){for(i in p.cache.events){o=p.cache.events[i].elems;n.event.remove.apply(o,[null,q,s]);}p.cache.events=new Object();}},update:function(o,s,u){var t=g(this),p,r=t.data(m);if(r){if(s===undefined){s="fast";}if(g.isArray(o)){for(var q=0;q<o.length;q++){p=r.elements.container.find("div.ui-"+m+'-event[data-id="'+o[q].uid+'"]');if(p.length>0){n.event.update.apply(p,[o[q],s,u]);}}}else{p=r.elements.container.find("div.ui-"+m+'-event[data-id="'+o.uid+'"]');if(p.length>0){n.event.update.apply(p,[o,s,u]);}}}return t;},refresh:function(w,q,r){var v=g(this),p,t=v.data(m);if(t){var o=t.elements.container.find("div.ui-"+m+"-event");if(q===undefined){q="fast";}if(g.isArray(w)){for(var u=0;u<w.length;u++){p=t.elements.container.find("div.ui-"+m+'-event[data-id="'+w[u].uid+'"]');if(p.length>0){n.event.update.apply(p,[w[u],q,r]);for(var s=0;s<o.length;s++){if(parseInt(g(o[s]).attr("data-id"))==w[u].uid){o.splice(s,1);break;}}}else{c.add.apply(v,[w[u]]);}}}for(var u=0;u<o.length;u++){n.event.remove.apply(o[u],[null,q,r,true]);}}return v;},select:function(o,q,s){var r=g(this),p=r.data(m);if(p){$event=p.elements.container.find("div.ui-"+m+'-event[data-id="'+o+'"]');if($event.length>0){n.event.select.apply($event,[q,s]);}}return r;},option:function(x,w){var v=g(this),t=v.data(m);if(t){if(typeof x=="undefined"){return t.settings;}if(typeof x=="object"){for(var q in x){if(x.hasOwnProperty(q)){c.option.apply(v,[q,x[q]]);}}return v;}if(!x in t.settings){return false;}if(typeof w=="undefined"){return t.settings[x];}else{switch(x){case"allowremove":t.elements.container.find("div.ui-"+m+"-event span.button-remove").toggle(Boolean(w));break;case"allowresize":t.elements.container.find("p.resize-top, p.resize-bottom").toggle(Boolean(w));break;case"startdate":var u=g[m].date(w,t.settings.daytimestart),y=t.settings.startdate;t.settings.startdate=u;t.cache.enddate=u.addDays(t.settings.daystodisplay);v.data(m,t);var p;for(var s in t.cache.events){p=t.cache.events[s];if(!n.inrange.apply(this,[p.begins,p.ends,t.settings.startdate,t.cache.enddate])){if("elems" in p&&p.elems.length>0){p.elems.detach();}}else{n.draw[t.type].event.apply(v,[t,p]);}}var o=g("div.ui-"+m+"-date",t.elements.container).removeClass("ui-"+m+"-today"),r=g[m].date().format("Y-m-d");switch(t.type){case h:g(t.elements.dayblock).removeClass("ui-"+m+"-today").each(function(B,A){var D=g(A),z=u.addDays(B),C=z.format("Y-m-d");D.attr({date:C,day:z.getDay()}).find("p").html(z.format("j")).end();if(C===r){D.addClass("ui-"+m+"-today");}});break;case l:g("div.ui-"+m+"-label-date",t.elements.dateline).removeClass("ui-"+m+"-today").each(function(C,B){var z=g(B),A=u.addDays(C),D=A.format("Y-m-d");o.eq(C).attr({date:D,day:A.getDay()});z.attr({date:D,day:A.getDay()}).find("p").html(A.format(t.settings.maskdatelabel)).end();if(D===r){z.add(o.eq(C)).addClass("ui-"+m+"-today");}});break;}return v;break;default:t.settings[x]=w;break;}return v;}}},version:function(){return m+" v"+d;},destroy:function(){return this.each(function(){var q=g(this),p=q.data(m);if(p){for(var o=0;o<p.cache.events.length;o++){p.cache.events[o].elems.remove();}q.removeData(m);q.empty();}});}};g.fn[m]=function(o){if(c[o]){return c[o].apply(this,Array.prototype.slice.call(arguments,1));}else{if(typeof o==="object"||!o){return c.init.apply(this,arguments);}else{g.error("Method "+o+" does not exist on jQuery."+m);}}};g[m]={};g[m].colors={named:{aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370D8",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#D87093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",reactorblue:"#0266A1",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},HexToRGB:function(p,o){return(o!==undefined?"rgba":"rgb")+"("+g[m].colors.HexToR(p)+", "+g[m].colors.HexToG(p)+", "+g[m].colors.HexToB(p)+(o!==undefined?", "+o+")":")");},HexToR:function(o){return parseInt((g[m].colors.cutHex(o)).substring(0,2),16);},HexToG:function(o){return parseInt((g[m].colors.cutHex(o)).substring(2,4),16);},HexToB:function(o){return parseInt((g[m].colors.cutHex(o)).substring(4,6),16);},cutHex:function(o){return(o.charAt(0)=="#")?g[m].colors.padHex(o.substring(1,7)):g[m].colors.padHex(o);},padHex:function(o){return o.length>3?o:o.substring(0,1)+o.substring(0,1)+o.substring(1,2)+o.substring(1,2)+o.substring(2,3)+o.substring(2,3);},HueToRGB:function(s,r,o){if(o<0){o+=1;}if(o>1){o-=1;}if(o<1/6){return s+(r-s)*6*o;}if(o<1/2){return r;}if(o<2/3){return s+(r-s)*(2/3-o)*6;}return s;},HSLToRGB:function(w,C,v,B,y){var o,x,A;w/=360;C/=100;v/=100;if(C==0){o=x=A=v;}else{var t=v<0.5?v*(1+C):v+C-v*C;var u=2*v-t;o=g[m].colors.HueToRGB(u,t,w+1/3);x=g[m].colors.HueToRGB(u,t,w);A=g[m].colors.HueToRGB(u,t,w-1/3);}var z=[Math.round(o*255),Math.round(x*255),Math.round(A*255)];if(y){if(B!==undefined){z[3]=B;}return z;}return(B!==undefined?"rgba":"rgb")+"("+z.join(", ")+(B!==undefined?", "+B+")":")");},RGBToHSL:function(o,u,w){o/=255,u/=255,w/=255;var x=Math.max(o,u,w),q=Math.min(o,u,w);var t,y,p=(x+q)/2;if(x==q){t=y=0;}else{var v=x-q;y=p>0.5?v/(2-x-q):v/(x+q);switch(x){case o:t=(u-w)/v+(u<w?6:0);break;case u:t=(w-o)/v+2;break;case w:t=(o-u)/v+4;break;}t/=6;}return[Math.round(t*360),Math.round(y*100),Math.round(p*100)];},brightness:function(q,p,o){return((q*299)+(p*587)+(o*114))/1000;},generate:function(p){var o=10;if(p in g[m].colors.named){p=g[m].colors.named[p];}if(p.match(/^#?([0-9A-Fa-f]{3,6})$/)){var t=[g[m].colors.HexToR(p),g[m].colors.HexToG(p),g[m].colors.HexToB(p)];var v=g[m].colors.RGBToHSL(t[0],t[1],t[2]);}else{if(p.replace(/ /g,"").match(/([rR][gG][bB]\s*\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|([rR][gG][bB]\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\))/)){var t=p.replace(/[a-zA-Z\(\) ]/g,"").split(",");var v=g[m].colors.RGBToHSL(t[0],t[1],t[2]);}else{if(p.replace(/ /g,"").match(/([hH][sS][lL]\s*\(\s*([0-9]|[1-9][0-9]|[1-2][0-9][0-9]|3[0-5][0-9]|360)\s*,\s*(\d?\d%|100%)\s*,\s*(\d?\d%|100%)\s*\))/)){var v=p.replace(/[a-zA-Z\(\) %]/g,"").split(",");}else{throw new Error("Invalid Colour: could not parse "+p+" as a color.");}}}if(v[1]<o){v[1]+=o;}if(v[1]>100-o){v[1]-=o;}if(v[2]>100-o){v[2]-=o;}if(v[2]<o){v[2]+=o;}function q(A,z,x){var y=g.extend([],A);y[1]=Math.max(0,y[1]+(z/2));y[2]=Math.min(100,y[2]+z);if(x!==undefined){y[3]=x;}return y;}function w(A,z,x){var y=g.extend([],A);y[2]=Math.max(0,y[2]-z);if(x!==undefined){y[3]=x;}return y;}var r=g[m].colors.HSLToRGB.apply(this,q(v,o*5,0.3));var s=g[m].colors.HSLToRGB.apply(this,q(v,o*3,0.75));var u=(g[m].colors.brightness.apply(this,g[m].colors.HSLToRGB(v[0],v[1],v[2],undefined,true))>125?"#333333":"#FFFFFF");return{original:p,mainBackground:g[m].colors.HSLToRGB.apply(this,v),mainTextShadow:r,mainShadow:s,mainText:u,mainSelected:g[m].colors.HSLToRGB.apply(this,w(v,o)),detailsBackground:g[m].colors.HSLToRGB.apply(this,q(v,o)),detailsTextShadow:r,detailsShadow:s,detailsText:u};}};g[m].lang={en:{short_month:Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"),long_month:Array("January","February","March","April","May","June","July","August","September","October","November","December"),short_day:Array("Sun","Mon","Tue","Wed","Thu","Fri","Sat"),long_day:Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"),label_remove:"Remove",label_today:"Today"}};var a={d:function(){return(this.getDate()<10?"0":"")+this.getDate();},D:function(){return g[m].lang[this.lang].short_day[this.getDay()];},j:function(){return this.getDate();},l:function(){return g[m].lang[this.lang].long_day[this.getDay()];},N:function(){return this.getDay()+1;},S:function(){return(this.getDate()%10==1&&this.getDate()!=11?"st":(this.getDate()%10==2&&this.getDate()!=12?"nd":(this.getDate()%10==3&&this.getDate()!=13?"rd":"th")));},w:function(){return this.getDay();},z:function(){if(window.console){console.error("Mask 'z' Not Yet Supported");}return"z";},W:function(){var o=new Date(this.getFullYear(),0,1);return Math.ceil((((this-o)/86400000)+o.getDay()+1)/7);},F:function(){return g[m].lang[this.lang].long_month[this.getMonth()];},m:function(){return(this.getMonth()+1<10?"0":"")+(this.getMonth()+1);},M:function(){return g[m].lang[this.lang].short_month[this.getMonth()];},n:function(){return this.getMonth()+1;},t:function(){return(new Date((new Date(this.getFullYear(),this.getMonth()+1,1))-1)).getDate();},L:function(){if(window.console){console.error("Mask 'L' Not Yet Supported");}return"L";},o:function(){if(window.console){console.error("Mask 'o' Not Yet Supported");}return"o";},Y:function(){return this.getFullYear();},y:function(){return(""+this.getFullYear()).substr(2);},a:function(){return this.getHours()<12?"am":"pm";},A:function(){return this.getHours()<12?"AM":"PM";},B:function(){if(window.console){console.error("Mask 'B' Not Yet Supported");}return"B";},g:function(){return this.getHours()==0?12:(this.getHours()>12?this.getHours()-12:this.getHours());},G:function(){return this.getHours();},h:function(){return(this.getHours()<10||(12<this.getHours()<22)?"0":"")+(this.getHours()<10?this.getHours()+1:this.getHours()-12);},H:function(){return(this.getHours()<10?"0":"")+this.getHours();},i:function(){return(this.getMinutes()<10?"0":"")+this.getMinutes();},s:function(){return(this.getSeconds()<10?"0":"")+this.getSeconds();},e:function(){if(window.console){console.error("Mask 'e' Not Supported");}return"e";},I:function(){if(window.console){console.error("Mask 'I' Not Supported");}return"I";},O:function(){return this.toString().match(/GMT([+-][0-9]+) \(([a-zA-Z]+)\)/)[1];},P:function(){var o=this.toString().match(/GMT([+-][0-9]+) \(([a-zA-Z]+)\)/)[1].split("");o.splice(-2,0,":");return o.join("");},T:function(){return this.toString().match(/GMT([+-][0-9]+) \(([a-zA-Z]+)\)/)[2];},Z:function(){return this.getTimezoneOffset()*60;},c:function(){return a.Y.apply(this)+"-"+a.m.apply(this)+"-"+a.d.apply(this)+"T"+a.H.apply(this)+":"+a.i.apply(this)+":"+a.s.apply(this)+a.P.apply(this);},C:function(){return a.c.apply(this).replace(a.P.apply(this),"")+"Z";},r:function(){return this.toString();},U:function(){return this.getTime()/1000;}};var b={d:function(){return(this.getUTCDate()<10?"0":"")+this.getUTCDate();},D:function(){return g[m].lang[this.lang].short_day[this.getUTCDay()];},j:function(){return this.getUTCDate();},l:function(){return g[m].lang[this.lang].long_day[this.getUTCDay()];},N:function(){return this.getUTCDay()+1;},S:function(){return(this.getUTCDate()%10==1&&this.getUTCDate()!=11?"st":(this.getUTCDate()%10==2&&this.getUTCDate()!=12?"nd":(this.getUTCDate()%10==3&&this.getUTCDate()!=13?"rd":"th")));},w:function(){return this.getUTCDay();},z:a.z,W:function(){var o=new Date(this.getUTCFullYear(),0,1);return Math.ceil((((this-o)/86400000)+o.getUTCDay()+1)/7);},F:function(){return g[m].lang[this.lang].long_month[this.getUTCMonth()];},m:function(){return(this.getUTCMonth()+1<10?"0":"")+(this.getUTCMonth()+1);},M:function(){return g[m].lang[this.lang].short_month[this.getUTCMonth()];},n:function(){return this.getUTCMonth()+1;},t:function(){return(new Date((new Date(this.getUTCFullYear(),this.getUTCMonth()+1,1))-1)).getUTCDate();},L:a.L,o:a.o,Y:function(){return this.getUTCFullYear();},y:function(){return(""+this.getUTCFullYear()).substr(2);},a:function(){return this.getUTCHours()<12?"am":"pm";},A:function(){return this.getUTCHours()<12?"AM":"PM";},B:a.B,g:function(){return this.getUTCHours()==0?12:(this.getUTCHours()>12?this.getUTCHours()-12:this.getUTCHours());},G:function(){return this.getUTCHours();},h:function(){return(this.getUTCHours()<10||(12<this.getUTCHours()<22)?"0":"")+(this.getUTCHours()<10?this.getUTCHours()+1:this.getUTCHours()-12);},H:function(){return(this.getUTCHours()<10?"0":"")+this.getUTCHours();},i:function(){return(this.getUTCMinutes()<10?"0":"")+this.getUTCMinutes();},s:function(){return(this.getUTCSeconds()<10?"0":"")+this.getUTCSeconds();},e:a.e,I:a.I,O:a.O,P:a.P,T:a.T,Z:a.Z,c:function(){return b.Y.apply(this)+"-"+b.m.apply(this)+"-"+b.d.apply(this)+"T"+b.H.apply(this)+":"+b.i.apply(this)+":"+b.s.apply(this)+b.P.apply(this);},C:function(){return b.c.apply(this).replace(b.P.apply(this),"")+"Z";},r:a.r,U:function(){return this.getUTCTime()/1000;}};g[m].format=function(p,u,s){var t="",o="";var r=s?b:a;for(var q=0;q<u.length;q++){o=u.charAt(q);if(o=="\\"&&r[u.charAt(q+1)]){t+=u.charAt(q+1);q++;}else{if(a[o]){t+=r[o].call(p);}else{t+=o;}}}return t;};g[m].date=function(u,r,o){var v;var x;if(u instanceof Date){v=new Date(Date.UTC(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate(),u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),0));if(r!==undefined){var w=r.match(/[0-9]{1,2}:[0-9]{1,2}:[0-9]{1,2}([Zz])?/)?true:r==""?true:false;if(w){var t,q,B;t=q=F=0;r=r.split(":");t=r[0];q=r[1];F=r[2];if((r[3]||"").toLowerCase()=="z"){v.setUTCHours(t);v.setUTCMinutes(q);v.setUTCSeconds(F);}else{v.setHours(t);v.setMinutes(q);v.setSeconds(F);}}}if("lang" in v){return v;}}else{if(typeof u=="string"||(u&&typeof u=="object"&&"toString" in u)){if(u.toString()!==""){var A=u.toString().split(/[Tt ]/);if(r!==undefined){A[1]=!r?"":r;}var E=0 in A?(A[0]==""?null:A[0].match(/([0-9]{2,4})-?([0-9]{2})-?([0-9]{2})/)):null;var D=1 in A?(A[1]==""?null:A[1].match(/([0-9]{2}):?([0-9]{2}):?([0-9]{2})([Zz])?/)):null;if(E===null){var z=new Date();E=["",z.getFullYear(),z.getMonth()+1,z.getDate()];}if(D===null){D=["",0,0,0];}if(E&&D){var C=E[1],p=E[2]-1,B=E[3],t=D[1],q=D[2],F=D[3];if((D[4]||"").toLowerCase()=="z"){v=new Date(Date.UTC(C,p,B,t,q,F,0));}else{v=new Date(C,p,B,t,q,F);}}}}}if(!(v instanceof Date)||isNaN(v)){v=new Date();}v.lang=o||"en";v.roundToDay=function(){return g[m].date(new Date(this.getUTCFullYear(),this.getUTCMonth(),this.getUTCDate(),0,0,0));};v.roundToMonth=function(){return g[m].date(new Date(this.getUTCFullYear(),this.getUTCMonth(),1,0,0,0));};v.getUTCTime=function(){return this.getTime()+(this.getTimezoneOffset()*60000);};v.getYearsBetween=function(G,y){var s=this.getMonthsBetween(G);return Math.floor(s/12);};v.getMonthsBetween=function(L,s){var J=this.copy(),I=L.copy();var H=J.copy();H.setDate(1);H.setMonth(H.getMonth()+1);H.setDate(0);H=H.getDate();var y=I.copy();y.setDate(1);y.setMonth(y.getMonth()+1);y.setDate(0);y=y.getDate();if(s){J.setDate(1);I.setDate(1);}var K=J.getFullYear()*12+J.getMonth();var G=I.getFullYear()*12+I.getMonth();if(!s){K+=(((J.getDate()+(J.getHours()/24)+(J.getMinutes()/24/60)-1)/H));G+=(((I.getDate()+(I.getHours()/24)+(J.getMinutes()/24/60)-1)/y));}return G-K;};v.getWeeksBetween=function(I,y){var H=this.copy();var G=I.copy();if(y){H=H.addDays(1-H.getDay());H.setHours(0,0,0,0);}var s=H.getDaysBetween(G)/7;return(y?Math.floor(s):s);};v.getDaysBetween=function(I,s){var G=I.copy();if(s){G.setHours(this.getHours(),this.getMinutes(),this.getSeconds(),this.getMilliseconds());}var y=((-this.getTimezoneOffset()/60)-(-G.getTimezoneOffset()/60))*3600000;var H=G.getTime()-this.getTime();return(H-y)/86400000;};v.getHoursBetween=function(I,s){var G=I.copy();if(s){G.setMinutes(this.getMinutes(),this.getSeconds(),this.getMilliseconds());}var y=((-this.getTimezoneOffset()/60)-(-G.getTimezoneOffset()/60))*3600000;var H=G.getTime()-this.getTime();return(H-y)/3600000;};v.getMinutesBetween=function(I,s){var G=I.copy();if(s){G.setSeconds(this.getSeconds(),this.getMilliseconds());}var y=((-this.getTimezoneOffset()/60)-(-G.getTimezoneOffset()/60))*3600000;var H=G.getTime()-this.getTime();return(H-y)/60000;};v.getSecondsBetween=function(y,s){return s?Math.round(this.getMinutesBetween(y)*60):this.getMinutesBetween(y)*60;};v.addYears=function(I){var H=Math.floor(I);var s=Math.floor((I-H)*12);var G=this.copy();G.setFullYear(this.getFullYear()+H);G.setMonth(this.getMonth()+s);return G;};v.addMonths=function(G){var s=Math.floor(G);var y=this.copy();y.setMonth(this.getMonth()+s);return y;};v.addDays=function(K){var J=Math.floor(K);var I=Math.floor((K-J)*24);var G=Math.floor(((K-J)-(I/24))*24*60);var H=Math.floor(((K-J)-(I/24)-(G/24/60))*24*60*60);var y=this.copy();y.setDate(this.getDate()+J);y.setHours(this.getHours()+I);y.setMinutes(this.getMinutes()+G);y.setSeconds(this.getSeconds()+H);return y;};v.addHours=function(J){var I=Math.floor(J);var G=Math.floor((J-I)*60);var H=Math.floor(((J-I)-(G/60))*60*60);var y=this.copy();y.setHours(this.getHours()+I);y.setMinutes(this.getMinutes()+G);y.setSeconds(this.getSeconds()+H);return y;};v.addMinutes=function(I){var G=Math.floor(I);var H=Math.floor((I-G)*60);var y=this.copy();y.setMinutes(this.getMinutes()+G);y.setSeconds(this.getSeconds()+H);return y;};v.addSeconds=function(H){var G=Math.floor(H);var y=this.copy();y.setSeconds(this.getSeconds()+G);return y;};v.copy=function(){return g[m].date(this.format("Y-m-d H:i:s"));};v.format=function(s){return g[m].format(this,s);};v.formatUTC=function(s){return g[m].format(this,s,true);};v.incrementBy=function(I,G){if(G!==undefined&&(isNaN(Number(G))||!(Number(G)!==0))){return this;}if(!(typeof I=="string"||typeof I=="number")&&(I==null||I==undefined||I==false||!("toString" in I))){return this.copy();}var y=I.split(" ");var s=Number(y[0]);var H=y[1]||"hour";if(G!==null&&G!==undefined&&G!==false&&!isNaN(G)){s=s*G;}if(s!==0){switch(H.toString().replace(/s$/,"").toLowerCase()){case"sec":case"second":return this.addMinutes(s/60);case"min":case"minute":return this.addMinutes(s);case"hour":return this.addHours(s);case"day":return this.addDays(s);case"week":return this.addDays(s*7);case"month":return this.addMonths(s);case"year":return this.addYears(s);}}return this.copy();};v.getIncrementBetween=function(y,I){if(!(y instanceof Date)||!I){return 0;}var G=I.split(" ");var s=Number(G[0]);var H=G[1]||"hour";if(s!==0){switch(H.toString().replace(/s$/,"").toLowerCase()){case"sec":case"second":return((this.getMinutesBetween(y)/60)/s);case"min":case"minute":return(this.getMinutesBetween(y)/s);case"hour":return(this.getHoursBetween(y)/s);case"day":return(this.getDaysBetween(y)/s);case"week":return((this.getDaysBetween(y)/7)/s);case"month":return(this.getMonthsBetween(y)/s);case"year":return(this.getYearsBetween(y)/s);}}return Infinity;};v.roundToIncrement=function(N){if(!(typeof N=="string"||typeof N=="number")&&(N==null||N==undefined||N==false||!("toString" in N))){return this.copy();}var L=N.split(" ");var P=Number(L[0]);var O=L[1]||"hour";var I=this.getTime();if(P!==0){var J=0;switch(O.toString().replace(/s$/,"").toLowerCase()){case"sec":case"second":J=1000*P;break;case"min":case"minute":J=60000*P;break;case"hour":J=3600000*P;break;case"day":J=86400000*P;return g[m].date(new Date((Math.round((I+43200000)/J)*J))).addHours(-12);case"week":var y=this.getDay();var H=null;if(y<3){H=this.addDays(0-y);}else{if(y>3){H=this.addDays(7-y);}else{H=this.addDays(this.getHours()>=12?7-y:0-y);}}H.setHours(0,0,0,0);return H;break;case"month":var K=g[m].date(this.format("Y-m-01 00:00:00"));var s=K.getDaysBetween(K.addMonths(1))/2;if(this.getDate()>=s){return K.addMonths(1);}else{return K;}break;case"year":var M=g[m].date(this.format("Y-01-01 00:00:00"));var s=M.getDaysBetween(M.addYears(1))/2;var G=M.getDaysBetween(this);if(G>=s){return M.addYears(1);}else{return M;}break;}return g[m].date(new Date((Math.round(I/J)*J)));}return this;};return v;};g[m].incrementsIn=function(q,o){var p=g[m].date("1970-01-01 00:00:00");return p.getIncrementBetween(p.incrementBy(q),o);};})(jQuery);