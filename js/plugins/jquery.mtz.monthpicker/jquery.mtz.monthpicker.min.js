(function(b){var a={init:function(c){return this.each(function(){var g=b(this),f=g.data("monthpicker"),e=(c&&c.year)?c.year:(new Date()).getFullYear(),d=b.extend({pattern:"mm/yyyy",selectedMonth:null,selectedMonthName:"",selectedYear:e,startYear:e-10,finalYear:e+10,monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],id:"monthpicker_"+(Math.random()*Math.random()).toString().replace(".",""),openOnFocus:true,disabledMonths:[]},c);d.dateSeparator=d.pattern.replace(/(mmm|mm|m|yyyy|yy|y)/ig,"");if(!f){b(this).data("monthpicker",{target:g,settings:d});if(d.openOnFocus===true){g.on("focus",function(){g.monthpicker("show")})}g.monthpicker("parseInputValue",d);g.monthpicker("mountWidget",d);g.on("monthpicker-click-month",function(j,i,h){g.monthpicker("setValue",d);g.monthpicker("hide")});g.addClass("mtz-monthpicker-widgetcontainer");b(document).unbind("mousedown.mtzmonthpicker").on("mousedown.mtzmonthpicker",function(h){if(!h.target.className||h.target.className.toString().indexOf("mtz-monthpicker")<0){b(this).monthpicker("hideAll")}})}})},show:function(){b(this).monthpicker("hideAll");var c=b("#"+this.data("monthpicker").settings.id);c.css("top",this.offset().top+this.outerHeight());if(b(window).width()>(c.width()+this.offset().left)){c.css("left",this.offset().left)}else{c.css("left",this.offset().left-c.width())}c.show();c.find("select").focus();this.trigger("monthpicker-show")},hide:function(){var c=b("#"+this.data("monthpicker").settings.id);if(c.is(":visible")){c.hide();this.trigger("monthpicker-hide")}},hideAll:function(){b(".mtz-monthpicker-widgetcontainer").each(function(){if(typeof(b(this).data("monthpicker"))!="undefined"){b(this).monthpicker("hide")}})},setValue:function(d){var e=d.selectedMonth,c=d.selectedYear;if(d.pattern.indexOf("mmm")>=0){e=d.selectedMonthName}else{if(d.pattern.indexOf("mm")>=0&&d.selectedMonth<10){e="0"+d.selectedMonth}}if(d.pattern.indexOf("yyyy")<0){c=c.toString().substr(2,2)}if(d.pattern.indexOf("y")>d.pattern.indexOf(d.dateSeparator)){this.val(e+d.dateSeparator+c)}else{this.val(c+d.dateSeparator+e)}this.change()},disableMonths:function(c){var e=this.data("monthpicker").settings,d=b("#"+e.id);e.disabledMonths=c;d.find(".mtz-monthpicker-month").each(function(){var f=parseInt(b(this).data("month"));if(b.inArray(f,c)>=0){b(this).addClass("ui-state-disabled")}else{b(this).removeClass("ui-state-disabled")}})},mountWidget:function(f){var o=this,c=b('<div id="'+f.id+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all" />'),k=b('<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix ui-corner-all mtz-monthpicker" />'),d=b('<select class="mtz-monthpicker mtz-monthpicker-year" />'),q=b('<table class="mtz-monthpicker" />'),h=b('<tbody class="mtz-monthpicker" />'),n=b('<tr class="mtz-monthpicker" />'),e="",r=f.selectedYear,j=null,m=b(this).data("selected-year"),p=b(this).data("start-year"),l=b(this).data("final-year");if(m){f.selectedYear=m}if(p){f.startYear=p}if(l){f.finalYear=l}c.css({position:"absolute",zIndex:999999,whiteSpace:"nowrap",width:"250px",overflow:"hidden",textAlign:"center",display:"none",top:o.offset().top+o.outerHeight(),left:o.offset().left});d.on("change",function(){var i=b(this).parent().parent().find("td[data-month]");i.removeClass("ui-state-active");if(b(this).val()==f.selectedYear){i.filter("td[data-month="+f.selectedMonth+"]").addClass("ui-state-active")}o.trigger("monthpicker-change-year",b(this).val())});for(var g=f.startYear;g<=f.finalYear;g++){var j=b('<option class="mtz-monthpicker" />').attr("value",g).append(g);if(f.selectedYear==g){j.attr("selected","selected")}d.append(j)}k.append(d).appendTo(c);for(var g=1;g<=12;g++){e=b('<td class="ui-state-default mtz-monthpicker mtz-monthpicker-month" style="padding:5px;cursor:default;" />').attr("data-month",g);if(f.selectedMonth==g){e.addClass("ui-state-active")}e.append(f.monthNames[g-1]);n.append(e).appendTo(h);if(g%3===0){n=b('<tr class="mtz-monthpicker" />')}}h.find(".mtz-monthpicker-month").on("click",function(){var i=parseInt(b(this).data("month"));if(b.inArray(i,f.disabledMonths)<0){f.selectedYear=b(this).closest(".ui-datepicker").find(".mtz-monthpicker-year").first().val();f.selectedMonth=b(this).data("month");f.selectedMonthName=b(this).text();o.trigger("monthpicker-click-month",b(this).data("month"));b(this).closest("table").find(".ui-state-active").removeClass("ui-state-active");b(this).addClass("ui-state-active")}});q.append(h).appendTo(c);c.appendTo("body")},destroy:function(){return this.each(function(){b(this).removeClass("mtz-monthpicker-widgetcontainer").unbind("focus").removeData("monthpicker")})},getDate:function(){var c=this.data("monthpicker").settings;if(c.selectedMonth&&c.selectedYear){return new Date(c.selectedYear,c.selectedMonth-1)}else{return null}},parseInputValue:function(c){if(this.val()){if(c.dateSeparator){var d=this.val().toString().split(c.dateSeparator);if(c.pattern.indexOf("m")===0){c.selectedMonth=d[0];c.selectedYear=d[1]}else{c.selectedMonth=d[1];c.selectedYear=d[0]}}}}};b.fn.monthpicker=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments)}else{b.error("Method "+c+" does not exist on jQuery.mtz.monthpicker")}}}})(jQuery);